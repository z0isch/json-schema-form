{"version":3,"file":"json-schema-form.js","sources":["../node_modules/.pnpm/@lit+reactive-element@2.1.2/node_modules/@lit/reactive-element/css-tag.js","../node_modules/.pnpm/@lit+reactive-element@2.1.2/node_modules/@lit/reactive-element/reactive-element.js","../node_modules/.pnpm/lit-html@3.3.2/node_modules/lit-html/lit-html.js","../node_modules/.pnpm/lit-element@4.2.2/node_modules/lit-element/lit-element.js","../node_modules/.pnpm/@lit+reactive-element@2.1.2/node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/.pnpm/@lit+reactive-element@2.1.2/node_modules/@lit/reactive-element/decorators/property.js","../node_modules/.pnpm/@lit+reactive-element@2.1.2/node_modules/@lit/reactive-element/decorators/state.js","../src/schema/parser.ts","../src/schema/validator.ts","../src/styles/form-styles.ts","../src/json-schema-form.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i,e=!1,h){if(void 0!==t){const r=this.constructor;if(!1===e&&(h=this[t]),i??=r.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.2\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t=>t,s=t.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,h=\"$lit$\",o=`lit$${Math.random().toFixed(9).slice(2)}$`,n=\"?\"+o,r=`<${n}>`,l=document,c=()=>l.createComment(\"\"),a=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,d=t=>u(t)||\"function\"==typeof t?.[Symbol.iterator],f=\"[ \\t\\n\\f\\r]\",v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${f}(?:([^\\\\s\"'>=/]+)(${f}*=${f}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,x=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),b=x(1),w=x(2),T=x(3),E=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),C=new WeakMap,P=l.createTreeWalker(l,129);function V(t,i){if(!u(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const N=(t,i)=>{const s=t.length-1,e=[];let n,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=v;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,f=0;for(;f<s.length&&(c.lastIndex=f,u=c.exec(s),null!==u);)f=c.lastIndex,c===v?\"!--\"===u[1]?c=_:void 0!==u[1]?c=m:void 0!==u[2]?(y.test(u[2])&&(n=RegExp(\"</\"+u[2],\"g\")),c=p):void 0!==u[3]&&(c=p):c===p?\">\"===u[0]?(c=n??v,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?p:'\"'===u[3]?$:g):c===$||c===g?c=p:c===_||c===m?c=v:(c=p,n=void 0);const x=c===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===v?s+r:d>=0?(e.push(a),s.slice(0,d)+h+s.slice(d)+o+x):s+o+(-2===d?i:x)}return[V(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),e]};class S{constructor({strings:t,_$litType$:i},e){let r;this.parts=[];let l=0,a=0;const u=t.length-1,d=this.parts,[f,v]=N(t,i);if(this.el=S.createElement(f,e),P.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(h)){const i=v[a++],s=r.getAttribute(t).split(o),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:l,name:e[2],strings:s,ctor:\".\"===e[1]?I:\"?\"===e[1]?L:\"@\"===e[1]?z:H}),r.removeAttribute(t)}else t.startsWith(o)&&(d.push({type:6,index:l}),r.removeAttribute(t));if(y.test(r.tagName)){const t=r.textContent.split(o),i=t.length-1;if(i>0){r.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)r.append(t[s],c()),P.nextNode(),d.push({type:2,index:++l});r.append(t[i],c())}}}else if(8===r.nodeType)if(r.data===n)d.push({type:2,index:l});else{let t=-1;for(;-1!==(t=r.data.indexOf(o,t+1));)d.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function M(t,i,s=t,e){if(i===E)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=a(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=M(t,h._$AS(t,i.values),h,e)),i}class R{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??l).importNode(i,!0);P.currentNode=e;let h=P.nextNode(),o=0,n=0,r=s[0];for(;void 0!==r;){if(o===r.index){let i;2===r.type?i=new k(h,h.nextSibling,this,t):1===r.type?i=new r.ctor(h,r.name,r.strings,this,t):6===r.type&&(i=new Z(h,this,t)),this._$AV.push(i),r=s[++n]}o!==r?.index&&(h=P.nextNode(),o++)}return P.currentNode=l,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=M(this,t,i),a(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==E&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&a(this._$AH)?this._$AA.nextSibling.data=t:this.T(l.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=S.createElement(V(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new R(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=C.get(t.strings);return void 0===i&&C.set(t.strings,i=new S(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new k(this.O(c()),this.O(c()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=i(t).nextSibling;i(t).remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class H{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=M(this,t,i,0),o=!a(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=M(this,e[s+n],i,n),r===E&&(r=this._$AH[n]),o||=!a(r)||r!==this._$AH[n],r===A?t=A:t!==A&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class I extends H{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends H{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class z extends H{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=M(this,t,i,0)??A)===E)return;const s=this._$AH,e=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==A&&(s===A||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const j={M:h,P:o,A:n,C:1,L:N,R,D:d,V:M,I:k,H,N:L,U:z,B:I,F:Z},B=t.litHtmlPolyfillSupport;B?.(S,k),(t.litHtmlVersions??=[]).push(\"3.3.2\");const D=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new k(i.insertBefore(c(),t),t,void 0,s??{})}return h._$AI(t),h};export{j as _$LH,b as html,T as mathml,E as noChange,A as nothing,D as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.2\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=t=>(e,o)=>{void 0!==o?o.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)};export{t as customElement};\n//# sourceMappingURL=custom-element.js.map\n","import{notEqual as t,defaultConverter as e}from\"../reactive-element.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const o={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:t},r=(t=o,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(void 0===s&&globalThis.litPropertyMetadata.set(i,s=new Map),\"setter\"===n&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),\"accessor\"===n){const{name:o}=r;return{set(r){const n=e.get.call(this);e.set.call(this,r),this.requestUpdate(o,n,t,!0,r)},init(e){return void 0!==e&&this.C(o,void 0,t,e),e}}}if(\"setter\"===n){const{name:o}=r;return function(r){const n=this[o];e.call(this,r),this.requestUpdate(o,n,t,!0,r)}}throw Error(\"Unsupported decorator location: \"+n)};function n(t){return(e,o)=>\"object\"==typeof o?r(t,e,o):((t,e,o)=>{const r=e.hasOwnProperty(o);return e.constructor.createProperty(o,t),r?Object.getOwnPropertyDescriptor(e,o):void 0})(t,e,o)}export{n as property,r as standardProperty};\n//# sourceMappingURL=property.js.map\n","import{property as t}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function r(r){return t({...r,state:!0,attribute:!1})}export{r as state};\n//# sourceMappingURL=state.js.map\n","import type {\n  JSONSchema,\n  SchemaParserOptions,\n  ResolvedSchema,\n} from \"./types.js\";\n\n/**\n * Schema parser that handles parsing JSON Schema strings and resolving references\n */\nexport class SchemaParser {\n  private schema: JSONSchema;\n  private options: SchemaParserOptions;\n  private defsMap: Map<string, JSONSchema> = new Map();\n  private resolutionStack: Set<string> = new Set();\n\n  constructor(schema: JSONSchema | string, options: SchemaParserOptions = {}) {\n    this.schema = typeof schema === \"string\" ? JSON.parse(schema) : schema;\n    this.options = options;\n    this.buildDefsMap();\n  }\n\n  /**\n   * Parse a JSON Schema string into a schema object\n   */\n  static parse(schemaString: string): JSONSchema {\n    try {\n      const parsed = JSON.parse(schemaString);\n\n      // Handle boolean schemas (Section 4.3.2)\n      if (typeof parsed === \"boolean\") {\n        return parsed ? {} : { not: {} };\n      }\n\n      if (typeof parsed !== \"object\" || parsed === null) {\n        throw new Error(\"Schema must be an object or boolean\");\n      }\n\n      return parsed as JSONSchema;\n    } catch (e) {\n      if (e instanceof SyntaxError) {\n        throw new Error(`Invalid JSON in schema: ${e.message}`);\n      }\n      throw e;\n    }\n  }\n\n  /**\n   * Build a map of all $defs for quick reference resolution\n   */\n  private buildDefsMap(): void {\n    if (this.schema.$defs) {\n      for (const [name, def] of Object.entries(this.schema.$defs)) {\n        this.defsMap.set(`#/$defs/${name}`, def as JSONSchema);\n      }\n    }\n\n    // Also support legacy \"definitions\" keyword\n    const definitions = (this.schema as Record<string, unknown>).definitions;\n    if (definitions && typeof definitions === \"object\") {\n      for (const [name, def] of Object.entries(definitions)) {\n        this.defsMap.set(`#/definitions/${name}`, def as JSONSchema);\n      }\n    }\n  }\n\n  /**\n   * Resolve a $ref to its target schema\n   * Detects and prevents circular reference loops\n   */\n  resolveRef(ref: string): ResolvedSchema | null {\n    // Check for circular reference\n    if (this.resolutionStack.has(ref)) {\n      // Return a marker schema indicating circular reference\n      return {\n        _originalRef: ref,\n        _isResolved: true,\n        _isCircular: true,\n        title: `Circular reference: ${ref}`,\n      } as ResolvedSchema;\n    }\n\n    // Add to resolution stack\n    this.resolutionStack.add(ref);\n\n    try {\n      // Handle local references (starting with #)\n      if (ref.startsWith(\"#\")) {\n        const resolved = this.resolveLocalRef(ref);\n        if (resolved) {\n          // Check if the resolved schema has nested $refs that might be circular\n          const result = {\n            ...resolved,\n            _originalRef: ref,\n            _isResolved: true,\n          };\n\n          return result;\n        }\n      }\n\n      // Handle external references\n      if (this.options.externalSchemas && ref in this.options.externalSchemas) {\n        return {\n          ...this.options.externalSchemas[ref],\n          _originalRef: ref,\n          _isResolved: true,\n        };\n      }\n\n      if (this.options.strictRefs) {\n        throw new Error(`Unable to resolve reference: ${ref}`);\n      }\n\n      return null;\n    } finally {\n      // Remove from resolution stack when done\n      this.resolutionStack.delete(ref);\n    }\n  }\n\n  /**\n   * Check if a reference would create a circular dependency\n   */\n  isCircularRef(ref: string): boolean {\n    return this.resolutionStack.has(ref);\n  }\n\n  /**\n   * Reset the resolution stack (useful for starting a new resolution chain)\n   */\n  resetResolutionStack(): void {\n    this.resolutionStack.clear();\n  }\n\n  /**\n   * Resolve a local reference (JSON Pointer within the document)\n   */\n  private resolveLocalRef(ref: string): JSONSchema | null {\n    // Check $defs map first\n    if (this.defsMap.has(ref)) {\n      return this.defsMap.get(ref) || null;\n    }\n\n    // Parse JSON Pointer and navigate\n    if (ref === \"#\") {\n      return this.schema;\n    }\n\n    const pointer = ref.slice(1); // Remove leading #\n    return this.resolveJsonPointer(this.schema, pointer);\n  }\n\n  /**\n   * Resolve a JSON Pointer path within an object\n   */\n  private resolveJsonPointer(obj: unknown, pointer: string): JSONSchema | null {\n    if (!pointer || pointer === \"/\") {\n      return obj as JSONSchema;\n    }\n\n    const parts = pointer.split(\"/\").slice(1); // Remove empty first element\n    let current: unknown = obj;\n\n    for (const part of parts) {\n      // Decode JSON Pointer escapes\n      const decoded = part.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n\n      if (current === null || typeof current !== \"object\") {\n        return null;\n      }\n\n      if (Array.isArray(current)) {\n        const index = parseInt(decoded, 10);\n        if (isNaN(index) || index < 0 || index >= current.length) {\n          return null;\n        }\n        current = current[index];\n      } else {\n        current = (current as Record<string, unknown>)[decoded];\n      }\n\n      if (current === undefined) {\n        return null;\n      }\n    }\n\n    return current as JSONSchema;\n  }\n\n  /**\n   * Get the parsed schema\n   */\n  getSchema(): JSONSchema {\n    return this.schema;\n  }\n\n  /**\n   * Check if a schema is a boolean schema\n   */\n  static isBooleanSchema(schema: unknown): schema is boolean {\n    return typeof schema === \"boolean\";\n  }\n\n  /**\n   * Normalize a schema (handle boolean schemas, apply defaults)\n   */\n  static normalize(schema: JSONSchema | boolean): JSONSchema {\n    if (typeof schema === \"boolean\") {\n      return schema ? {} : { not: {} };\n    }\n    return schema;\n  }\n\n  /**\n   * Get the effective type(s) from a schema\n   */\n  static getTypes(schema: JSONSchema): string[] {\n    if (!schema.type) {\n      return [];\n    }\n    return Array.isArray(schema.type) ? schema.type : [schema.type];\n  }\n\n  /**\n   * Check if a schema allows a specific type\n   */\n  static allowsType(schema: JSONSchema, type: string): boolean {\n    if (!schema.type) {\n      return true; // No type constraint means any type is allowed\n    }\n    const types = this.getTypes(schema);\n    return types.includes(type);\n  }\n}\n","import type { JSONSchema, ValidationError } from \"./types.js\";\nimport { SchemaParser } from \"./parser.js\";\n\n/**\n * Schema validator for runtime validation of form values\n */\nexport class SchemaValidator {\n  private parser: SchemaParser;\n\n  constructor(schema: JSONSchema | string) {\n    this.parser = new SchemaParser(schema);\n  }\n\n  /**\n   * Validate a value against the schema\n   */\n  validate(value: unknown, schema?: JSONSchema): ValidationError[] {\n    const targetSchema = schema || this.parser.getSchema();\n    return this.validateValue(value, targetSchema, \"\", \"#\");\n  }\n\n  /**\n   * Check if a value is valid against the schema\n   */\n  isValid(value: unknown, schema?: JSONSchema): boolean {\n    return this.validate(value, schema).length === 0;\n  }\n\n  /**\n   * Validate a value against a schema at a specific path\n   */\n  private validateValue(\n    value: unknown,\n    schema: JSONSchema | boolean,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    // Handle boolean schemas\n    if (typeof schema === \"boolean\") {\n      if (!schema) {\n        errors.push({\n          instancePath,\n          schemaPath,\n          keyword: \"false schema\",\n          message: \"Schema is false, no value is valid\",\n        });\n      }\n      return errors;\n    }\n\n    // Handle $ref\n    if (schema.$ref) {\n      const resolved = this.parser.resolveRef(schema.$ref);\n      if (resolved) {\n        errors.push(\n          ...this.validateValue(\n            value,\n            resolved,\n            instancePath,\n            `${schemaPath}/$ref`\n          )\n        );\n      }\n    }\n\n    // Type validation\n    if (schema.type) {\n      const typeErrors = this.validateType(\n        value,\n        schema,\n        instancePath,\n        schemaPath\n      );\n      errors.push(...typeErrors);\n    }\n\n    // Enum validation\n    if (schema.enum !== undefined) {\n      if (!schema.enum.some((e) => this.deepEqual(e, value))) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/enum`,\n          keyword: \"enum\",\n          message: `Value must be one of: ${JSON.stringify(schema.enum)}`,\n          params: { allowedValues: schema.enum },\n        });\n      }\n    }\n\n    // Const validation\n    if (schema.const !== undefined) {\n      if (!this.deepEqual(schema.const, value)) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/const`,\n          keyword: \"const\",\n          message: `Value must be: ${JSON.stringify(schema.const)}`,\n          params: { allowedValue: schema.const },\n        });\n      }\n    }\n\n    // Type-specific validation\n    if (typeof value === \"string\") {\n      errors.push(\n        ...this.validateString(value, schema, instancePath, schemaPath)\n      );\n    } else if (typeof value === \"number\") {\n      errors.push(\n        ...this.validateNumber(value, schema, instancePath, schemaPath)\n      );\n    } else if (Array.isArray(value)) {\n      errors.push(\n        ...this.validateArray(value, schema, instancePath, schemaPath)\n      );\n    } else if (typeof value === \"object\" && value !== null) {\n      errors.push(\n        ...this.validateObject(\n          value as Record<string, unknown>,\n          schema,\n          instancePath,\n          schemaPath\n        )\n      );\n    }\n\n    // Composition keywords\n    errors.push(\n      ...this.validateComposition(value, schema, instancePath, schemaPath)\n    );\n\n    // Conditional keywords (if/then/else)\n    errors.push(\n      ...this.validateConditional(value, schema, instancePath, schemaPath)\n    );\n\n    return errors;\n  }\n\n  /**\n   * Validate the type of a value\n   */\n  private validateType(\n    value: unknown,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const types = SchemaParser.getTypes(schema);\n    if (types.length === 0) return [];\n\n    const actualType = this.getValueType(value);\n\n    // Check if actual type matches any allowed type\n    const isValid = types.some((type) => {\n      if (type === \"integer\") {\n        return typeof value === \"number\" && Number.isInteger(value);\n      }\n      return type === actualType;\n    });\n\n    if (!isValid) {\n      return [\n        {\n          instancePath,\n          schemaPath: `${schemaPath}/type`,\n          keyword: \"type\",\n          message: `Expected type ${types.join(\" or \")}, got ${actualType}`,\n          params: { expectedTypes: types, actualType },\n        },\n      ];\n    }\n\n    return [];\n  }\n\n  /**\n   * Get the JSON Schema type of a value\n   */\n  private getValueType(value: unknown): string {\n    if (value === null) return \"null\";\n    if (Array.isArray(value)) return \"array\";\n    return typeof value;\n  }\n\n  /**\n   * Validate string-specific keywords\n   */\n  private validateString(\n    value: string,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    if (schema.minLength !== undefined && value.length < schema.minLength) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/minLength`,\n        keyword: \"minLength\",\n        message: `String must be at least ${schema.minLength} characters`,\n        params: { minLength: schema.minLength, actualLength: value.length },\n      });\n    }\n\n    if (schema.maxLength !== undefined && value.length > schema.maxLength) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/maxLength`,\n        keyword: \"maxLength\",\n        message: `String must be at most ${schema.maxLength} characters`,\n        params: { maxLength: schema.maxLength, actualLength: value.length },\n      });\n    }\n\n    if (schema.pattern !== undefined) {\n      const regex = new RegExp(schema.pattern, \"u\");\n      if (!regex.test(value)) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/pattern`,\n          keyword: \"pattern\",\n          message: `String must match pattern: ${schema.pattern}`,\n          params: { pattern: schema.pattern },\n        });\n      }\n    }\n\n    // Format validation\n    if (schema.format !== undefined && value !== \"\") {\n      const formatError = this.validateFormat(value, schema.format);\n      if (formatError) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/format`,\n          keyword: \"format\",\n          message: formatError,\n          params: { format: schema.format },\n        });\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * Validate string format\n   */\n  private validateFormat(value: string, format: string): string | null {\n    switch (format) {\n      case \"date\":\n        return this.validateDateFormat(value);\n      case \"time\":\n        return this.validateTimeFormat(value);\n      case \"date-time\":\n        return this.validateDateTimeFormat(value);\n      case \"duration\":\n        return this.validateDurationFormat(value);\n      case \"email\":\n        return this.validateEmailFormat(value);\n      case \"idn-email\":\n        return this.validateIdnEmailFormat(value);\n      case \"uri\":\n        return this.validateUriFormat(value, false);\n      case \"uri-reference\":\n        return this.validateUriFormat(value, true);\n      case \"iri\":\n        return this.validateIriFormat(value, false);\n      case \"iri-reference\":\n        return this.validateIriFormat(value, true);\n      case \"uuid\":\n        return this.validateUuidFormat(value);\n      case \"ipv4\":\n        return this.validateIpv4Format(value);\n      case \"ipv6\":\n        return this.validateIpv6Format(value);\n      case \"hostname\":\n        return this.validateHostnameFormat(value);\n      case \"idn-hostname\":\n        return this.validateIdnHostnameFormat(value);\n      case \"regex\":\n        return this.validateRegexFormat(value);\n      case \"json-pointer\":\n        return this.validateJsonPointerFormat(value);\n      case \"relative-json-pointer\":\n        return this.validateRelativeJsonPointerFormat(value);\n      case \"uri-template\":\n        return this.validateUriTemplateFormat(value);\n      default:\n        // Unknown format - treat as valid (per JSON Schema spec)\n        return null;\n    }\n  }\n\n  /**\n   * Validate RFC 3339 full-date format (YYYY-MM-DD)\n   */\n  private validateDateFormat(value: string): string | null {\n    const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n    if (!dateRegex.test(value)) {\n      return \"Must be a valid date (YYYY-MM-DD)\";\n    }\n\n    const [year, month, day] = value.split(\"-\").map(Number);\n    const date = new Date(year, month - 1, day);\n\n    if (\n      date.getFullYear() !== year ||\n      date.getMonth() !== month - 1 ||\n      date.getDate() !== day\n    ) {\n      return \"Must be a valid date\";\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate RFC 3339 full-time format (HH:MM:SS or HH:MM:SS.sss with timezone)\n   */\n  private validateTimeFormat(value: string): string | null {\n    // Time with optional fractional seconds and required timezone\n    const timeRegex =\n      /^([01]\\d|2[0-3]):([0-5]\\d):([0-5]\\d)(\\.\\d+)?(Z|[+-]([01]\\d|2[0-3]):[0-5]\\d)?$/i;\n    if (!timeRegex.test(value)) {\n      return \"Must be a valid time (HH:MM:SS)\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate RFC 3339 date-time format\n   */\n  private validateDateTimeFormat(value: string): string | null {\n    // ISO 8601 / RFC 3339 date-time\n    const dateTimeRegex =\n      /^\\d{4}-\\d{2}-\\d{2}[T ]\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(Z|[+-]\\d{2}:\\d{2})?$/i;\n    if (!dateTimeRegex.test(value)) {\n      return \"Must be a valid date-time (YYYY-MM-DDTHH:MM:SS)\";\n    }\n\n    // Validate the date portion\n    const datePart = value.substring(0, 10);\n    const dateError = this.validateDateFormat(datePart);\n    if (dateError) {\n      return dateError;\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate ISO 8601 duration format\n   */\n  private validateDurationFormat(value: string): string | null {\n    // ISO 8601 duration: P[n]Y[n]M[n]DT[n]H[n]M[n]S\n    const durationRegex =\n      /^P(?:\\d+Y)?(?:\\d+M)?(?:\\d+W)?(?:\\d+D)?(?:T(?:\\d+H)?(?:\\d+M)?(?:\\d+(?:\\.\\d+)?S)?)?$/;\n    if (!durationRegex.test(value) || value === \"P\" || value === \"PT\") {\n      return \"Must be a valid ISO 8601 duration (e.g., P1Y2M3DT4H5M6S)\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate email format (RFC 5321)\n   */\n  private validateEmailFormat(value: string): string | null {\n    // Basic email validation - allows most valid emails\n    const emailRegex =\n      /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n    if (!emailRegex.test(value)) {\n      return \"Must be a valid email address\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate internationalized email format (RFC 6531)\n   */\n  private validateIdnEmailFormat(value: string): string | null {\n    // More permissive regex for IDN emails (allows unicode)\n    const idnEmailRegex = /^.+@.+\\..+$/;\n    if (!idnEmailRegex.test(value)) {\n      return \"Must be a valid email address\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate URI format (RFC 3986)\n   */\n  private validateUriFormat(\n    value: string,\n    allowReference: boolean\n  ): string | null {\n    try {\n      const url = new URL(\n        value,\n        allowReference ? \"http://example.com\" : undefined\n      );\n      if (!allowReference && !url.protocol) {\n        return \"Must be a valid URI with scheme\";\n      }\n      return null;\n    } catch {\n      return allowReference\n        ? \"Must be a valid URI or URI reference\"\n        : \"Must be a valid URI\";\n    }\n  }\n\n  /**\n   * Validate IRI format (RFC 3987)\n   */\n  private validateIriFormat(\n    value: string,\n    allowReference: boolean\n  ): string | null {\n    // IRI is essentially URI with unicode support\n    // Modern browsers handle this in URL constructor\n    return this.validateUriFormat(value, allowReference);\n  }\n\n  /**\n   * Validate UUID format (RFC 4122)\n   */\n  private validateUuidFormat(value: string): string | null {\n    const uuidRegex =\n      /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!uuidRegex.test(value)) {\n      return \"Must be a valid UUID\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate IPv4 address format (RFC 2673)\n   */\n  private validateIpv4Format(value: string): string | null {\n    const ipv4Regex = /^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$/;\n    const match = value.match(ipv4Regex);\n    if (!match) {\n      return \"Must be a valid IPv4 address\";\n    }\n\n    // Validate each octet is 0-255\n    for (let i = 1; i <= 4; i++) {\n      const octet = parseInt(match[i], 10);\n      if (octet < 0 || octet > 255) {\n        return \"Must be a valid IPv4 address (each octet must be 0-255)\";\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate IPv6 address format (RFC 4291)\n   */\n  private validateIpv6Format(value: string): string | null {\n    // Full IPv6, compressed, or IPv4-mapped\n    const ipv6Regex =\n      /^(?:(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,7}:|(?:[0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,5}(?::[0-9a-fA-F]{1,4}){1,2}|(?:[0-9a-fA-F]{1,4}:){1,4}(?::[0-9a-fA-F]{1,4}){1,3}|(?:[0-9a-fA-F]{1,4}:){1,3}(?::[0-9a-fA-F]{1,4}){1,4}|(?:[0-9a-fA-F]{1,4}:){1,2}(?::[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:(?::[0-9a-fA-F]{1,4}){1,6}|:(?:(?::[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(?::[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]+|::(?:ffff(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?[0-9])?[0-9])\\.){3}(?:25[0-5]|(?:2[0-4]|1?[0-9])?[0-9])|(?:[0-9a-fA-F]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?[0-9])?[0-9])\\.){3}(?:25[0-5]|(?:2[0-4]|1?[0-9])?[0-9]))$/;\n\n    if (!ipv6Regex.test(value)) {\n      return \"Must be a valid IPv6 address\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate hostname format (RFC 1123)\n   */\n  private validateHostnameFormat(value: string): string | null {\n    // Hostname: alphanumeric and hyphens, max 253 chars total, max 63 per label\n    if (value.length > 253) {\n      return \"Hostname must be at most 253 characters\";\n    }\n\n    const hostnameRegex =\n      /^(?!-)[a-zA-Z0-9-]{1,63}(?<!-)(?:\\.(?!-)[a-zA-Z0-9-]{1,63}(?<!-))*$/;\n    if (!hostnameRegex.test(value)) {\n      return \"Must be a valid hostname\";\n    }\n    return null;\n  }\n\n  /**\n   * Validate internationalized hostname format (RFC 5890)\n   */\n  private validateIdnHostnameFormat(value: string): string | null {\n    if (value.length > 253) {\n      return \"Hostname must be at most 253 characters\";\n    }\n\n    // Allow unicode characters in hostname\n    const labels = value.split(\".\");\n    for (const label of labels) {\n      if (label.length === 0 || label.length > 63) {\n        return \"Each label must be 1-63 characters\";\n      }\n      if (label.startsWith(\"-\") || label.endsWith(\"-\")) {\n        return \"Labels cannot start or end with hyphen\";\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate regex format - check if value is a valid regular expression\n   */\n  private validateRegexFormat(value: string): string | null {\n    try {\n      new RegExp(value);\n      return null;\n    } catch {\n      return \"Must be a valid regular expression\";\n    }\n  }\n\n  /**\n   * Validate JSON Pointer format (RFC 6901)\n   */\n  private validateJsonPointerFormat(value: string): string | null {\n    if (value === \"\") {\n      return null; // Empty string is valid (references whole document)\n    }\n\n    if (!value.startsWith(\"/\")) {\n      return \"JSON Pointer must start with / or be empty\";\n    }\n\n    // Check for valid escape sequences\n    const segments = value.split(\"/\").slice(1);\n    for (const segment of segments) {\n      // Check for invalid escape sequences (~ must be followed by 0 or 1)\n      let i = 0;\n      while (i < segment.length) {\n        if (segment[i] === \"~\") {\n          if (\n            i + 1 >= segment.length ||\n            (segment[i + 1] !== \"0\" && segment[i + 1] !== \"1\")\n          ) {\n            return \"Invalid escape sequence in JSON Pointer (~ must be followed by 0 or 1)\";\n          }\n          i += 2;\n        } else {\n          i++;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate Relative JSON Pointer format (draft)\n   */\n  private validateRelativeJsonPointerFormat(value: string): string | null {\n    // Format: non-negative-integer [json-pointer | \"#\"]\n    const relativeRegex = /^\\d+(#|\\/.*)?$/;\n    if (!relativeRegex.test(value)) {\n      return \"Must be a valid relative JSON Pointer\";\n    }\n\n    // If there's a JSON pointer part, validate it\n    const match = value.match(/^\\d+(\\/.*)?$/);\n    if (match && match[1]) {\n      return this.validateJsonPointerFormat(match[1]);\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate URI template format (RFC 6570)\n   */\n  private validateUriTemplateFormat(value: string): string | null {\n    // Basic validation - check for balanced braces and valid variable names\n    let braceDepth = 0;\n    let inExpression = false;\n\n    for (let i = 0; i < value.length; i++) {\n      const char = value[i];\n      if (char === \"{\") {\n        if (inExpression) {\n          return \"Nested braces are not allowed in URI templates\";\n        }\n        inExpression = true;\n        braceDepth++;\n      } else if (char === \"}\") {\n        if (!inExpression) {\n          return \"Unmatched closing brace in URI template\";\n        }\n        inExpression = false;\n        braceDepth--;\n      }\n    }\n\n    if (braceDepth !== 0) {\n      return \"Unmatched opening brace in URI template\";\n    }\n\n    return null;\n  }\n\n  /**\n   * Validate number-specific keywords\n   */\n  private validateNumber(\n    value: number,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    if (schema.minimum !== undefined && value < schema.minimum) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/minimum`,\n        keyword: \"minimum\",\n        message: `Value must be >= ${schema.minimum}`,\n        params: { minimum: schema.minimum, actual: value },\n      });\n    }\n\n    if (schema.maximum !== undefined && value > schema.maximum) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/maximum`,\n        keyword: \"maximum\",\n        message: `Value must be <= ${schema.maximum}`,\n        params: { maximum: schema.maximum, actual: value },\n      });\n    }\n\n    if (\n      schema.exclusiveMinimum !== undefined &&\n      value <= schema.exclusiveMinimum\n    ) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/exclusiveMinimum`,\n        keyword: \"exclusiveMinimum\",\n        message: `Value must be > ${schema.exclusiveMinimum}`,\n        params: { exclusiveMinimum: schema.exclusiveMinimum, actual: value },\n      });\n    }\n\n    if (\n      schema.exclusiveMaximum !== undefined &&\n      value >= schema.exclusiveMaximum\n    ) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/exclusiveMaximum`,\n        keyword: \"exclusiveMaximum\",\n        message: `Value must be < ${schema.exclusiveMaximum}`,\n        params: { exclusiveMaximum: schema.exclusiveMaximum, actual: value },\n      });\n    }\n\n    if (schema.multipleOf !== undefined && value % schema.multipleOf !== 0) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/multipleOf`,\n        keyword: \"multipleOf\",\n        message: `Value must be a multiple of ${schema.multipleOf}`,\n        params: { multipleOf: schema.multipleOf, actual: value },\n      });\n    }\n\n    return errors;\n  }\n\n  /**\n   * Validate array-specific keywords\n   */\n  private validateArray(\n    value: unknown[],\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    if (schema.minItems !== undefined && value.length < schema.minItems) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/minItems`,\n        keyword: \"minItems\",\n        message: `Array must have at least ${schema.minItems} items`,\n        params: { minItems: schema.minItems, actualItems: value.length },\n      });\n    }\n\n    if (schema.maxItems !== undefined && value.length > schema.maxItems) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/maxItems`,\n        keyword: \"maxItems\",\n        message: `Array must have at most ${schema.maxItems} items`,\n        params: { maxItems: schema.maxItems, actualItems: value.length },\n      });\n    }\n\n    if (schema.uniqueItems && !this.areItemsUnique(value)) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/uniqueItems`,\n        keyword: \"uniqueItems\",\n        message: \"Array items must be unique\",\n      });\n    }\n\n    // Validate prefixItems\n    if (schema.prefixItems) {\n      for (let i = 0; i < schema.prefixItems.length && i < value.length; i++) {\n        const itemSchema = schema.prefixItems[i];\n        errors.push(\n          ...this.validateValue(\n            value[i],\n            itemSchema,\n            `${instancePath}/${i}`,\n            `${schemaPath}/prefixItems/${i}`\n          )\n        );\n      }\n    }\n\n    // Validate items (applies to items after prefixItems, or all items if no prefixItems)\n    if (schema.items !== undefined) {\n      const startIndex = schema.prefixItems ? schema.prefixItems.length : 0;\n      for (let i = startIndex; i < value.length; i++) {\n        errors.push(\n          ...this.validateValue(\n            value[i],\n            schema.items,\n            `${instancePath}/${i}`,\n            `${schemaPath}/items`\n          )\n        );\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * Validate object-specific keywords\n   */\n  private validateObject(\n    value: Record<string, unknown>,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n    const keys = Object.keys(value);\n\n    // Required properties\n    if (schema.required) {\n      for (const required of schema.required) {\n        if (!(required in value)) {\n          errors.push({\n            instancePath,\n            schemaPath: `${schemaPath}/required`,\n            keyword: \"required\",\n            message: `Missing required property: ${required}`,\n            params: { missingProperty: required },\n          });\n        }\n      }\n    }\n\n    // Property count constraints\n    if (\n      schema.minProperties !== undefined &&\n      keys.length < schema.minProperties\n    ) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/minProperties`,\n        keyword: \"minProperties\",\n        message: `Object must have at least ${schema.minProperties} properties`,\n        params: {\n          minProperties: schema.minProperties,\n          actualProperties: keys.length,\n        },\n      });\n    }\n\n    if (\n      schema.maxProperties !== undefined &&\n      keys.length > schema.maxProperties\n    ) {\n      errors.push({\n        instancePath,\n        schemaPath: `${schemaPath}/maxProperties`,\n        keyword: \"maxProperties\",\n        message: `Object must have at most ${schema.maxProperties} properties`,\n        params: {\n          maxProperties: schema.maxProperties,\n          actualProperties: keys.length,\n        },\n      });\n    }\n\n    // Track which properties have been validated\n    const validatedProps = new Set<string>();\n\n    // Validate properties\n    if (schema.properties) {\n      for (const [propName, propSchema] of Object.entries(schema.properties)) {\n        if (propName in value) {\n          validatedProps.add(propName);\n          errors.push(\n            ...this.validateValue(\n              value[propName],\n              propSchema,\n              `${instancePath}/${propName}`,\n              `${schemaPath}/properties/${propName}`\n            )\n          );\n        }\n      }\n    }\n\n    // Validate patternProperties\n    if (schema.patternProperties) {\n      for (const [pattern, propSchema] of Object.entries(\n        schema.patternProperties\n      )) {\n        const regex = new RegExp(pattern, \"u\");\n        for (const propName of keys) {\n          if (regex.test(propName)) {\n            validatedProps.add(propName);\n            errors.push(\n              ...this.validateValue(\n                value[propName],\n                propSchema,\n                `${instancePath}/${propName}`,\n                `${schemaPath}/patternProperties/${pattern}`\n              )\n            );\n          }\n        }\n      }\n    }\n\n    // Validate additionalProperties\n    if (schema.additionalProperties !== undefined) {\n      for (const propName of keys) {\n        if (!validatedProps.has(propName)) {\n          if (schema.additionalProperties === false) {\n            errors.push({\n              instancePath: `${instancePath}/${propName}`,\n              schemaPath: `${schemaPath}/additionalProperties`,\n              keyword: \"additionalProperties\",\n              message: `Additional property not allowed: ${propName}`,\n              params: { additionalProperty: propName },\n            });\n          } else if (typeof schema.additionalProperties === \"object\") {\n            errors.push(\n              ...this.validateValue(\n                value[propName],\n                schema.additionalProperties,\n                `${instancePath}/${propName}`,\n                `${schemaPath}/additionalProperties`\n              )\n            );\n          }\n        }\n      }\n    }\n\n    // Validate dependentRequired\n    if (schema.dependentRequired) {\n      for (const [propName, requiredProps] of Object.entries(\n        schema.dependentRequired\n      )) {\n        // If property exists, check that dependent required properties also exist\n        if (propName in value) {\n          for (const reqProp of requiredProps) {\n            if (!(reqProp in value)) {\n              errors.push({\n                instancePath,\n                schemaPath: `${schemaPath}/dependentRequired`,\n                keyword: \"dependentRequired\",\n                message: `Property \"${reqProp}\" is required when \"${propName}\" is present`,\n                params: {\n                  property: propName,\n                  missingProperty: reqProp,\n                },\n              });\n            }\n          }\n        }\n      }\n    }\n\n    // Validate dependentSchemas\n    if (schema.dependentSchemas) {\n      for (const [propName, depSchema] of Object.entries(\n        schema.dependentSchemas\n      )) {\n        // If property exists, validate against the dependent schema\n        if (propName in value && depSchema) {\n          errors.push(\n            ...this.validateValue(\n              value,\n              depSchema,\n              instancePath,\n              `${schemaPath}/dependentSchemas/${propName}`\n            )\n          );\n        }\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * Validate composition keywords (allOf, anyOf, oneOf, not)\n   */\n  private validateComposition(\n    value: unknown,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    // allOf - must validate against all schemas\n    if (schema.allOf) {\n      for (let i = 0; i < schema.allOf.length; i++) {\n        errors.push(\n          ...this.validateValue(\n            value,\n            schema.allOf[i],\n            instancePath,\n            `${schemaPath}/allOf/${i}`\n          )\n        );\n      }\n    }\n\n    // anyOf - must validate against at least one schema\n    if (schema.anyOf) {\n      const anyOfValid = schema.anyOf.some(\n        (subSchema) =>\n          this.validateValue(value, subSchema, instancePath, schemaPath)\n            .length === 0\n      );\n      if (!anyOfValid) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/anyOf`,\n          keyword: \"anyOf\",\n          message: \"Value must match at least one schema in anyOf\",\n        });\n      }\n    }\n\n    // oneOf - must validate against exactly one schema\n    if (schema.oneOf) {\n      const validCount = schema.oneOf.filter(\n        (subSchema) =>\n          this.validateValue(value, subSchema, instancePath, schemaPath)\n            .length === 0\n      ).length;\n      if (validCount !== 1) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/oneOf`,\n          keyword: \"oneOf\",\n          message: `Value must match exactly one schema in oneOf (matched ${validCount})`,\n          params: { matchedSchemas: validCount },\n        });\n      }\n    }\n\n    // not - must NOT validate against the schema\n    if (schema.not) {\n      const notErrors = this.validateValue(\n        value,\n        schema.not,\n        instancePath,\n        `${schemaPath}/not`\n      );\n      if (notErrors.length === 0) {\n        errors.push({\n          instancePath,\n          schemaPath: `${schemaPath}/not`,\n          keyword: \"not\",\n          message: \"Value must NOT match the schema in not\",\n        });\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * Validate conditional keywords (if/then/else)\n   */\n  private validateConditional(\n    value: unknown,\n    schema: JSONSchema,\n    instancePath: string,\n    schemaPath: string\n  ): ValidationError[] {\n    const errors: ValidationError[] = [];\n\n    if (schema.if === undefined) {\n      return errors;\n    }\n\n    // Evaluate the 'if' condition\n    const ifErrors = this.validateValue(\n      value,\n      schema.if,\n      instancePath,\n      `${schemaPath}/if`\n    );\n    const conditionMet = ifErrors.length === 0;\n\n    // Apply 'then' if condition is met\n    if (conditionMet && schema.then !== undefined) {\n      errors.push(\n        ...this.validateValue(\n          value,\n          schema.then,\n          instancePath,\n          `${schemaPath}/then`\n        )\n      );\n    }\n\n    // Apply 'else' if condition is not met\n    if (!conditionMet && schema.else !== undefined) {\n      errors.push(\n        ...this.validateValue(\n          value,\n          schema.else,\n          instancePath,\n          `${schemaPath}/else`\n        )\n      );\n    }\n\n    return errors;\n  }\n\n  /**\n   * Check if all array items are unique\n   */\n  private areItemsUnique(arr: unknown[]): boolean {\n    for (let i = 0; i < arr.length; i++) {\n      for (let j = i + 1; j < arr.length; j++) {\n        if (this.deepEqual(arr[i], arr[j])) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Deep equality check for JSON values\n   */\n  private deepEqual(a: unknown, b: unknown): boolean {\n    if (a === b) return true;\n    if (typeof a !== typeof b) return false;\n    if (a === null || b === null) return a === b;\n\n    if (Array.isArray(a) && Array.isArray(b)) {\n      if (a.length !== b.length) return false;\n      return a.every((item, i) => this.deepEqual(item, b[i]));\n    }\n\n    if (typeof a === \"object\" && typeof b === \"object\") {\n      const aKeys = Object.keys(a as object);\n      const bKeys = Object.keys(b as object);\n      if (aKeys.length !== bKeys.length) return false;\n      return aKeys.every((key) =>\n        this.deepEqual(\n          (a as Record<string, unknown>)[key],\n          (b as Record<string, unknown>)[key]\n        )\n      );\n    }\n\n    return false;\n  }\n}\n","import { css } from \"lit\";\n\n/**\n * Shared CSS styles for the JSON Schema Form component\n * Uses CSS custom properties for easy theming\n */\nexport const formStyles = css`\n  :host {\n    /* Colors */\n    --jsf-color-primary: #6366f1;\n    --jsf-color-primary-hover: #4f46e5;\n    --jsf-color-error: #ef4444;\n    --jsf-color-error-bg: #fef2f2;\n    --jsf-color-success: #22c55e;\n    --jsf-color-warning: #f59e0b;\n    --jsf-color-text: #1f2937;\n    --jsf-color-text-muted: #6b7280;\n    --jsf-color-border: #d1d5db;\n    --jsf-color-border-focus: var(--jsf-color-primary);\n    --jsf-color-bg: #ffffff;\n    --jsf-color-bg-secondary: #f9fafb;\n    --jsf-color-bg-disabled: #f3f4f6;\n\n    /* Typography */\n    --jsf-font-family: system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\",\n      Roboto, sans-serif;\n    --jsf-font-size-base: 0.875rem;\n    --jsf-font-size-sm: 0.75rem;\n    --jsf-font-size-lg: 1rem;\n    --jsf-font-weight-normal: 400;\n    --jsf-font-weight-medium: 500;\n    --jsf-font-weight-semibold: 600;\n    --jsf-line-height: 1.5;\n\n    /* Spacing */\n    --jsf-spacing-xs: 0.25rem;\n    --jsf-spacing-sm: 0.5rem;\n    --jsf-spacing-md: 0.75rem;\n    --jsf-spacing-lg: 1rem;\n    --jsf-spacing-xl: 1.5rem;\n\n    /* Border radius */\n    --jsf-radius-sm: 0.25rem;\n    --jsf-radius-md: 0.375rem;\n    --jsf-radius-lg: 0.5rem;\n\n    /* Shadows */\n    --jsf-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n    --jsf-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);\n    --jsf-shadow-focus: 0 0 0 3px rgb(99 102 241 / 0.2);\n\n    /* Transitions */\n    --jsf-transition-fast: 150ms ease;\n    --jsf-transition-normal: 200ms ease;\n\n    display: block;\n    font-family: var(--jsf-font-family);\n    font-size: var(--jsf-font-size-base);\n    line-height: var(--jsf-line-height);\n    color: var(--jsf-color-text);\n  }\n\n  /* Form container */\n  .jsf-form {\n    display: flex;\n    flex-direction: column;\n    gap: var(--jsf-spacing-lg);\n  }\n\n  /* Field wrapper */\n  .jsf-field {\n    display: flex;\n    flex-direction: column;\n    gap: var(--jsf-spacing-xs);\n  }\n\n  /* Labels */\n  .jsf-label {\n    display: flex;\n    align-items: center;\n    gap: var(--jsf-spacing-xs);\n    font-weight: var(--jsf-font-weight-medium);\n    color: var(--jsf-color-text);\n  }\n\n  .jsf-label-required::after {\n    content: \"*\";\n    color: var(--jsf-color-error);\n    margin-left: var(--jsf-spacing-xs);\n  }\n\n  /* Description/help text */\n  .jsf-description {\n    font-size: var(--jsf-font-size-sm);\n    color: var(--jsf-color-text-muted);\n    margin-top: var(--jsf-spacing-xs);\n  }\n\n  /* Input base styles */\n  .jsf-input {\n    width: 100%;\n    padding: var(--jsf-spacing-sm) var(--jsf-spacing-md);\n    font-family: inherit;\n    font-size: var(--jsf-font-size-base);\n    line-height: var(--jsf-line-height);\n    color: var(--jsf-color-text);\n    background-color: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n    transition: border-color var(--jsf-transition-fast),\n      box-shadow var(--jsf-transition-fast);\n    box-sizing: border-box;\n  }\n\n  .jsf-input:focus {\n    outline: none;\n    border-color: var(--jsf-color-border-focus);\n    box-shadow: var(--jsf-shadow-focus);\n  }\n\n  .jsf-input:disabled {\n    background-color: var(--jsf-color-bg-disabled);\n    cursor: not-allowed;\n    opacity: 0.7;\n  }\n\n  .jsf-input::placeholder {\n    color: var(--jsf-color-text-muted);\n  }\n\n  .jsf-input--error {\n    border-color: var(--jsf-color-error);\n  }\n\n  .jsf-input--error:focus {\n    box-shadow: 0 0 0 3px rgb(239 68 68 / 0.2);\n  }\n\n  /* Textarea */\n  .jsf-textarea {\n    min-height: 80px;\n    resize: vertical;\n  }\n\n  /* Select */\n  .jsf-select {\n    appearance: none;\n    background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");\n    background-position: right var(--jsf-spacing-sm) center;\n    background-repeat: no-repeat;\n    background-size: 1.5em 1.5em;\n    padding-right: 2.5rem;\n  }\n\n  /* Checkbox & Radio */\n  .jsf-checkbox-wrapper,\n  .jsf-radio-wrapper {\n    display: flex;\n    align-items: center;\n    gap: var(--jsf-spacing-sm);\n  }\n\n  .jsf-checkbox,\n  .jsf-radio {\n    width: 1rem;\n    height: 1rem;\n    accent-color: var(--jsf-color-primary);\n    cursor: pointer;\n  }\n\n  .jsf-checkbox-label,\n  .jsf-radio-label {\n    font-weight: var(--jsf-font-weight-normal);\n    cursor: pointer;\n  }\n\n  /* Error message */\n  .jsf-error {\n    display: flex;\n    align-items: center;\n    gap: var(--jsf-spacing-xs);\n    font-size: var(--jsf-font-size-sm);\n    color: var(--jsf-color-error);\n    margin-top: var(--jsf-spacing-xs);\n  }\n\n  .jsf-error-icon {\n    flex-shrink: 0;\n    width: 1rem;\n    height: 1rem;\n  }\n\n  /* Buttons */\n  .jsf-button {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: var(--jsf-spacing-sm);\n    padding: var(--jsf-spacing-sm) var(--jsf-spacing-lg);\n    font-family: inherit;\n    font-size: var(--jsf-font-size-base);\n    font-weight: var(--jsf-font-weight-medium);\n    line-height: var(--jsf-line-height);\n    border-radius: var(--jsf-radius-md);\n    cursor: pointer;\n    transition: background-color var(--jsf-transition-fast),\n      border-color var(--jsf-transition-fast),\n      box-shadow var(--jsf-transition-fast);\n  }\n\n  .jsf-button--primary {\n    color: white;\n    background-color: var(--jsf-color-primary);\n    border: 1px solid var(--jsf-color-primary);\n  }\n\n  .jsf-button--primary:hover {\n    background-color: var(--jsf-color-primary-hover);\n    border-color: var(--jsf-color-primary-hover);\n  }\n\n  .jsf-button--primary:focus {\n    outline: none;\n    box-shadow: var(--jsf-shadow-focus);\n  }\n\n  .jsf-button--secondary {\n    color: var(--jsf-color-text);\n    background-color: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-border);\n  }\n\n  .jsf-button--secondary:hover {\n    background-color: var(--jsf-color-bg-secondary);\n  }\n\n  .jsf-button--danger {\n    color: white;\n    background-color: var(--jsf-color-error);\n    border: 1px solid var(--jsf-color-error);\n  }\n\n  .jsf-button--danger:hover {\n    background-color: #dc2626;\n    border-color: #dc2626;\n  }\n\n  .jsf-button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* Object/nested container */\n  .jsf-object {\n    display: flex;\n    flex-direction: column;\n    gap: var(--jsf-spacing-lg);\n    padding: var(--jsf-spacing-lg);\n    background-color: var(--jsf-color-bg-secondary);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-lg);\n  }\n\n  .jsf-object--nested {\n    background-color: var(--jsf-color-bg);\n  }\n\n  .jsf-object-title {\n    font-size: var(--jsf-font-size-lg);\n    font-weight: var(--jsf-font-weight-semibold);\n    margin: 0;\n    padding-bottom: var(--jsf-spacing-sm);\n    border-bottom: 1px solid var(--jsf-color-border);\n  }\n\n  /* Array container */\n  .jsf-array {\n    display: flex;\n    flex-direction: column;\n    gap: var(--jsf-spacing-md);\n  }\n\n  .jsf-array--tuple {\n    padding: var(--jsf-spacing-md);\n    background-color: var(--jsf-color-bg-secondary);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n  }\n\n  .jsf-array-item {\n    display: flex;\n    gap: var(--jsf-spacing-sm);\n    align-items: flex-start;\n  }\n\n  .jsf-array-item--prefix {\n    padding: var(--jsf-spacing-sm);\n    background-color: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-sm);\n  }\n\n  .jsf-array-item-index {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 1.5rem;\n    height: 1.5rem;\n    font-size: var(--jsf-font-size-sm);\n    font-weight: var(--jsf-font-weight-semibold);\n    color: var(--jsf-color-primary);\n    background-color: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-primary);\n    border-radius: 50%;\n    flex-shrink: 0;\n    margin-top: var(--jsf-spacing-xs);\n  }\n\n  .jsf-array-item-content {\n    flex: 1;\n  }\n\n  .jsf-array-item-actions {\n    display: flex;\n    gap: var(--jsf-spacing-xs);\n    flex-shrink: 0;\n  }\n\n  .jsf-array-add {\n    margin-top: var(--jsf-spacing-sm);\n  }\n\n  /* Icon button */\n  .jsf-icon-button {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 2rem;\n    height: 2rem;\n    padding: 0;\n    background: transparent;\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n    cursor: pointer;\n    transition: background-color var(--jsf-transition-fast);\n  }\n\n  .jsf-icon-button:hover {\n    background-color: var(--jsf-color-bg-secondary);\n  }\n\n  .jsf-icon-button--danger:hover {\n    background-color: var(--jsf-color-error-bg);\n    border-color: var(--jsf-color-error);\n    color: var(--jsf-color-error);\n  }\n\n  /* Deprecated field indicator */\n  .jsf-deprecated {\n    opacity: 0.6;\n  }\n\n  .jsf-deprecated .jsf-label::after {\n    content: \"(deprecated)\";\n    font-size: var(--jsf-font-size-sm);\n    font-weight: var(--jsf-font-weight-normal);\n    color: var(--jsf-color-warning);\n    margin-left: var(--jsf-spacing-sm);\n  }\n\n  /* Read-only indicator */\n  .jsf-readonly .jsf-input {\n    background-color: var(--jsf-color-bg-secondary);\n    cursor: default;\n  }\n\n  /* Form actions */\n  .jsf-actions {\n    display: flex;\n    gap: var(--jsf-spacing-md);\n    justify-content: flex-end;\n    padding-top: var(--jsf-spacing-lg);\n    border-top: 1px solid var(--jsf-color-border);\n    margin-top: var(--jsf-spacing-lg);\n  }\n\n  /* Composition (anyOf/oneOf) */\n  .jsf-composition {\n    display: flex;\n    flex-direction: column;\n    gap: var(--jsf-spacing-md);\n  }\n\n  .jsf-composition-selector {\n    display: flex;\n    gap: var(--jsf-spacing-sm);\n    align-items: center;\n  }\n\n  .jsf-composition-selector .jsf-select {\n    flex: 1;\n    max-width: 300px;\n  }\n\n  .jsf-composition-content {\n    padding: var(--jsf-spacing-md);\n    background-color: var(--jsf-color-bg-secondary);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n  }\n\n  .jsf-composition-content > .jsf-field:first-child {\n    margin-top: 0;\n  }\n\n  .jsf-composition-content > .jsf-field:last-child {\n    margin-bottom: 0;\n  }\n\n  /* Conditional sections animation */\n  .jsf-conditional {\n    animation: jsf-fade-in var(--jsf-transition-normal);\n  }\n\n  /* Circular reference indicator */\n  .jsf-circular-ref {\n    display: flex;\n    align-items: center;\n    gap: var(--jsf-spacing-sm);\n    padding: var(--jsf-spacing-md);\n    background-color: var(--jsf-color-bg-secondary);\n    border: 1px dashed var(--jsf-color-warning);\n    border-radius: var(--jsf-radius-md);\n    color: var(--jsf-color-warning);\n    font-size: var(--jsf-font-size-sm);\n  }\n\n  .jsf-circular-ref-icon {\n    width: 1rem;\n    height: 1rem;\n    flex-shrink: 0;\n  }\n\n  @keyframes jsf-fade-in {\n    from {\n      opacity: 0;\n      transform: translateY(-4px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  /* Additional Properties */\n  .jsf-additional-property {\n    position: relative;\n    padding: var(--jsf-spacing-md);\n    background-color: var(--jsf-color-bg);\n    border: 1px dashed var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n    animation: jsf-fade-in var(--jsf-transition-normal);\n  }\n\n  .jsf-additional-property-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: var(--jsf-spacing-sm);\n    padding-bottom: var(--jsf-spacing-xs);\n    border-bottom: 1px solid var(--jsf-color-border);\n  }\n\n  .jsf-additional-property-name {\n    font-size: var(--jsf-font-size-sm);\n    font-weight: var(--jsf-font-weight-medium);\n    color: var(--jsf-color-text-muted);\n    text-transform: uppercase;\n    letter-spacing: 0.025em;\n  }\n\n  .jsf-add-property {\n    display: flex;\n    gap: var(--jsf-spacing-sm);\n    align-items: center;\n    margin-top: var(--jsf-spacing-md);\n    padding-top: var(--jsf-spacing-md);\n    border-top: 1px dashed var(--jsf-color-border);\n  }\n\n  .jsf-add-property-input {\n    flex: 1;\n    max-width: 200px;\n  }\n\n  /* Pattern-matched properties */\n  .jsf-pattern-property {\n    border-color: var(--jsf-color-primary);\n    border-style: solid;\n  }\n\n  .jsf-pattern-badge {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.625rem;\n    margin-left: var(--jsf-spacing-xs);\n    cursor: help;\n  }\n\n  /* Format-specific inputs */\n  .jsf-format-input {\n    position: relative;\n    display: flex;\n    align-items: center;\n  }\n\n  .jsf-format-icon {\n    position: absolute;\n    right: var(--jsf-spacing-md);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--jsf-color-text-muted);\n    pointer-events: none;\n    z-index: 1;\n  }\n\n  .jsf-format-icon--left {\n    left: var(--jsf-spacing-md);\n    right: auto;\n  }\n\n  .jsf-format-icon--regex {\n    position: relative;\n    left: auto;\n    right: auto;\n    font-family: monospace;\n    font-weight: var(--jsf-font-weight-semibold);\n    color: var(--jsf-color-primary);\n    padding: 0 var(--jsf-spacing-xs);\n  }\n\n  .jsf-input--with-icon {\n    padding-left: calc(var(--jsf-spacing-md) + 1.5rem);\n  }\n\n  .jsf-input--monospace {\n    font-family: \"Monaco\", \"Menlo\", \"Ubuntu Mono\", \"Consolas\", monospace;\n    font-size: calc(var(--jsf-font-size-base) * 0.95);\n    letter-spacing: -0.02em;\n  }\n\n  .jsf-format-action {\n    position: absolute;\n    right: var(--jsf-spacing-sm);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 1.75rem;\n    height: 1.75rem;\n    color: var(--jsf-color-text-muted);\n    background: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-sm);\n    cursor: pointer;\n    transition: all var(--jsf-transition-fast);\n    text-decoration: none;\n  }\n\n  .jsf-format-action:hover {\n    color: var(--jsf-color-primary);\n    border-color: var(--jsf-color-primary);\n    background: var(--jsf-color-bg-secondary);\n  }\n\n  .jsf-format-action--button {\n    position: relative;\n    right: auto;\n    margin-left: var(--jsf-spacing-sm);\n    flex-shrink: 0;\n  }\n\n  .jsf-format-hint {\n    display: block;\n    width: 100%;\n    margin-top: var(--jsf-spacing-xs);\n    font-size: var(--jsf-font-size-sm);\n    color: var(--jsf-color-text-muted);\n    font-family: monospace;\n  }\n\n  /* Format-specific styling */\n  .jsf-format-date .jsf-input,\n  .jsf-format-time .jsf-input,\n  .jsf-format-datetime .jsf-input {\n    padding-right: calc(var(--jsf-spacing-md) + 1.5rem);\n  }\n\n  .jsf-format-uuid .jsf-input {\n    padding-right: calc(var(--jsf-spacing-sm) + 2.5rem);\n  }\n\n  .jsf-format-uri .jsf-input {\n    padding-right: calc(var(--jsf-spacing-sm) + 2.5rem);\n  }\n\n  .jsf-format-regex {\n    display: flex;\n    align-items: center;\n    background: var(--jsf-color-bg);\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n    overflow: hidden;\n  }\n\n  .jsf-format-regex:focus-within {\n    border-color: var(--jsf-color-border-focus);\n    box-shadow: var(--jsf-shadow-focus);\n  }\n\n  .jsf-format-regex .jsf-input {\n    border: none;\n    border-radius: 0;\n    padding-left: var(--jsf-spacing-xs);\n    padding-right: var(--jsf-spacing-xs);\n  }\n\n  .jsf-format-regex .jsf-input:focus {\n    box-shadow: none;\n  }\n\n  .jsf-format-duration {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .jsf-format-duration .jsf-input {\n    width: 100%;\n  }\n\n  /* Valid format indicator */\n  .jsf-format-input .jsf-input:not(.jsf-input--error):not(:placeholder-shown):valid {\n    border-color: var(--jsf-color-success);\n  }\n\n  .jsf-format-input .jsf-input:not(.jsf-input--error):not(:placeholder-shown):valid:focus {\n    box-shadow: 0 0 0 3px rgb(34 197 94 / 0.2);\n  }\n\n  /* Collapsible sections */\n  .jsf-collapsible {\n    border: 1px solid var(--jsf-color-border);\n    border-radius: var(--jsf-radius-md);\n    overflow: hidden;\n  }\n\n  .jsf-collapsible-header {\n    display: flex;\n    align-items: center;\n    gap: var(--jsf-spacing-sm);\n    padding: var(--jsf-spacing-md);\n    background-color: var(--jsf-color-bg-secondary);\n    cursor: pointer;\n    user-select: none;\n    transition: background-color var(--jsf-transition-fast);\n  }\n\n  .jsf-collapsible-header:hover {\n    background-color: var(--jsf-color-bg-disabled);\n  }\n\n  .jsf-collapsible-icon {\n    width: 1rem;\n    height: 1rem;\n    transition: transform var(--jsf-transition-fast);\n    flex-shrink: 0;\n  }\n\n  .jsf-collapsible--expanded .jsf-collapsible-icon {\n    transform: rotate(90deg);\n  }\n\n  .jsf-collapsible-title {\n    flex: 1;\n    font-weight: var(--jsf-font-weight-medium);\n  }\n\n  .jsf-collapsible-summary {\n    font-size: var(--jsf-font-size-sm);\n    color: var(--jsf-color-text-muted);\n  }\n\n  .jsf-collapsible-content {\n    display: none;\n    padding: var(--jsf-spacing-lg);\n    border-top: 1px solid var(--jsf-color-border);\n  }\n\n  .jsf-collapsible--expanded .jsf-collapsible-content {\n    display: block;\n    animation: jsf-fade-in var(--jsf-transition-normal);\n  }\n`;\n","import { LitElement, html, css, PropertyValues } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\nimport type { JSONSchema, ValidationError } from \"./schema/types.js\";\nimport { SchemaParser } from \"./schema/parser.js\";\nimport { SchemaValidator } from \"./schema/validator.js\";\nimport { formStyles } from \"./styles/form-styles.js\";\n\n/**\n * JSON Schema Form Web Component\n *\n * A web component that generates HTML forms from JSON Schema documents.\n *\n * @element json-schema-form\n *\n * @fires json-schema-form-submit - Fired when the form is submitted with valid data\n * @fires json-schema-form-change - Fired when any form value changes\n * @fires json-schema-form-error - Fired when validation errors occur\n * @fires json-schema-form-ready - Fired when the schema is parsed and form is ready\n *\n * @csspart form - The form element\n * @csspart field - Individual field containers\n * @csspart label - Field labels\n * @csspart input - Input elements\n * @csspart error - Error messages\n * @csspart actions - Form action buttons container\n *\n * @cssprop [--jsf-color-primary=#6366f1] - Primary accent color\n * @cssprop [--jsf-color-error=#ef4444] - Error color\n * @cssprop [--jsf-font-family=system-ui] - Font family\n */\n@customElement(\"json-schema-form\")\nexport class JsonSchemaForm extends LitElement {\n  static override styles = [\n    formStyles,\n    css`\n      :host {\n        display: block;\n      }\n\n      .jsf-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: var(--jsf-spacing-xl);\n        color: var(--jsf-color-text-muted);\n      }\n\n      .jsf-error-container {\n        padding: var(--jsf-spacing-lg);\n        background-color: var(--jsf-color-error-bg);\n        border: 1px solid var(--jsf-color-error);\n        border-radius: var(--jsf-radius-md);\n        color: var(--jsf-color-error);\n      }\n    `,\n  ];\n\n  /**\n   * The JSON Schema as a string\n   */\n  @property({ type: String })\n  schema = \"\";\n\n  /**\n   * The current form value\n   */\n  @property({ type: Object, attribute: false })\n  value: unknown = undefined;\n\n  /**\n   * Whether to validate on every change\n   */\n  @property({ type: Boolean, attribute: \"validate-on-change\" })\n  validateOnChange = false;\n\n  /**\n   * Whether to show the submit button\n   */\n  @property({ type: Boolean, attribute: \"show-submit\" })\n  showSubmit = true;\n\n  /**\n   * Submit button text\n   */\n  @property({ type: String, attribute: \"submit-text\" })\n  submitText = \"Submit\";\n\n  /**\n   * Initial data as a JSON string to populate the form\n   */\n  @property({ type: String, attribute: \"initial-data\" })\n  initialData = \"\";\n\n  /**\n   * Parsed schema object\n   */\n  @state()\n  private _parsedSchema: JSONSchema | null = null;\n\n  /**\n   * Schema parsing error\n   */\n  @state()\n  private _parseError: string | null = null;\n\n  /**\n   * Current validation errors\n   */\n  @state()\n  private _errors: ValidationError[] = [];\n\n  /**\n   * Whether the form has been submitted at least once\n   */\n  @state()\n  private _submitted = false;\n\n  /**\n   * Track selected schema indices for anyOf/oneOf at each path\n   */\n  @state()\n  private _schemaSelections: Map<string, number> = new Map();\n\n  /**\n   * Track collapsed state for collapsible sections\n   */\n  @state()\n  private _collapsedSections: Set<string> = new Set();\n\n  /**\n   * Parsed initial data object\n   */\n  private _parsedInitialData: unknown = undefined;\n\n  /**\n   * Initial data parsing error\n   */\n  @state()\n  private _initialDataError: string | null = null;\n\n  /**\n   * Schema parser instance\n   */\n  private _parser: SchemaParser | null = null;\n\n  /**\n   * Schema validator instance\n   */\n  private _validator: SchemaValidator | null = null;\n\n  /**\n   * Get whether the form is currently valid\n   */\n  get valid(): boolean {\n    return this._errors.length === 0;\n  }\n\n  /**\n   * Get current validation errors\n   */\n  get errors(): ValidationError[] {\n    return [...this._errors];\n  }\n\n  /**\n   * Get the parsed schema\n   */\n  getSchema(): JSONSchema | null {\n    return this._parsedSchema;\n  }\n\n  /**\n   * Get the parsed initial data\n   */\n  getInitialData(): unknown {\n    return this._parsedInitialData;\n  }\n\n  override connectedCallback(): void {\n    super.connectedCallback();\n    this._parseSchema();\n  }\n\n  override updated(changedProperties: PropertyValues): void {\n    if (changedProperties.has(\"schema\")) {\n      this._parseSchema();\n    } else if (changedProperties.has(\"initialData\")) {\n      // When initialData changes (but not schema), update the value\n      this._parseInitialData();\n      if (this._parsedInitialData !== undefined) {\n        this.value = JSON.parse(JSON.stringify(this._parsedInitialData));\n      }\n    }\n\n    if (changedProperties.has(\"value\") && this.validateOnChange) {\n      this._validate();\n    }\n  }\n\n  /**\n   * Parse the schema string\n   */\n  private _parseSchema(): void {\n    if (!this.schema) {\n      this._parsedSchema = null;\n      this._parseError = null;\n      return;\n    }\n\n    try {\n      this._parsedSchema = SchemaParser.parse(this.schema);\n      this._parser = new SchemaParser(this._parsedSchema);\n      this._validator = new SchemaValidator(this._parsedSchema);\n      this._parseError = null;\n\n      // Parse initial data if provided\n      this._parseInitialData();\n\n      // Initialize value: use initial data if provided, otherwise defaults\n      if (this.value === undefined) {\n        if (this._parsedInitialData !== undefined) {\n          // Deep clone to prevent mutations to the original initial data\n          this.value = JSON.parse(JSON.stringify(this._parsedInitialData));\n        } else {\n          this.value = this._getDefaultValue(this._parsedSchema);\n        }\n      }\n\n      this._dispatchEvent(\"json-schema-form-ready\", {\n        schema: this._parsedSchema,\n      });\n    } catch (e) {\n      this._parseError =\n        e instanceof Error ? e.message : \"Failed to parse schema\";\n      this._parsedSchema = null;\n      this._parser = null;\n      this._validator = null;\n    }\n  }\n\n  /**\n   * Parse the initial data string\n   */\n  private _parseInitialData(): void {\n    if (!this.initialData) {\n      this._parsedInitialData = undefined;\n      this._initialDataError = null;\n      return;\n    }\n\n    try {\n      this._parsedInitialData = JSON.parse(this.initialData);\n      this._initialDataError = null;\n    } catch (e) {\n      this._initialDataError =\n        e instanceof Error ? e.message : \"Failed to parse initial data\";\n      this._parsedInitialData = undefined;\n    }\n  }\n\n  /**\n   * Get the default value for a schema\n   */\n  private _getDefaultValue(schema: JSONSchema): unknown {\n    // Use explicit default if provided\n    if (schema.default !== undefined) {\n      return schema.default;\n    }\n\n    // Use const if provided\n    if (schema.const !== undefined) {\n      return schema.const;\n    }\n\n    // Handle oneOf/anyOf - generate default based on first subschema\n    if (schema.oneOf && schema.oneOf.length > 0) {\n      const firstSchema = schema.oneOf[0];\n      if (typeof firstSchema !== \"boolean\") {\n        return this._getDefaultValue(firstSchema);\n      }\n    }\n\n    if (schema.anyOf && schema.anyOf.length > 0) {\n      const firstSchema = schema.anyOf[0];\n      if (typeof firstSchema !== \"boolean\") {\n        return this._getDefaultValue(firstSchema);\n      }\n    }\n\n    // Generate default based on type\n    const types = SchemaParser.getTypes(schema);\n    const primaryType = types[0] || this._inferTypeFromSchema(schema);\n\n    switch (primaryType) {\n      case \"object\":\n        return this._getDefaultObjectValue(schema);\n      case \"array\":\n        return [];\n      case \"string\":\n        return \"\";\n      case \"number\":\n      case \"integer\":\n        return schema.minimum ?? 0;\n      case \"boolean\":\n        return false;\n      case \"null\":\n        return null;\n      default:\n        return undefined;\n    }\n  }\n\n  /**\n   * Infer type from schema keywords (without looking at value)\n   */\n  private _inferTypeFromSchema(schema: JSONSchema): string | undefined {\n    if (schema.properties || schema.additionalProperties || schema.required) {\n      return \"object\";\n    }\n    if (schema.items || schema.prefixItems) {\n      return \"array\";\n    }\n    if (schema.enum && schema.enum.length > 0) {\n      // Infer from first enum value\n      const firstVal = schema.enum[0];\n      if (firstVal === null) return \"null\";\n      if (Array.isArray(firstVal)) return \"array\";\n      return typeof firstVal;\n    }\n    return undefined;\n  }\n\n  /**\n   * Get default value for an object schema\n   */\n  private _getDefaultObjectValue(schema: JSONSchema): Record<string, unknown> {\n    const obj: Record<string, unknown> = {};\n\n    if (schema.properties) {\n      for (const [key, propSchema] of Object.entries(schema.properties)) {\n        if (typeof propSchema === \"boolean\") {\n          continue;\n        }\n        // Only set defaults for required properties or those with explicit defaults\n        if (\n          schema.required?.includes(key) ||\n          propSchema.default !== undefined\n        ) {\n          obj[key] = this._getDefaultValue(propSchema);\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  /**\n   * Validate the current value\n   */\n  validate(): boolean {\n    this._submitted = true;\n    return this._validate();\n  }\n\n  /**\n   * Internal validation\n   */\n  private _validate(): boolean {\n    if (!this._validator || !this._parsedSchema) {\n      return true;\n    }\n\n    this._errors = this._validator.validate(this.value);\n\n    if (this._errors.length > 0) {\n      this._dispatchEvent(\"json-schema-form-error\", { errors: this._errors });\n    }\n\n    return this._errors.length === 0;\n  }\n\n  /**\n   * Reset the form to initial data or default values\n   */\n  reset(): void {\n    if (this._parsedInitialData !== undefined) {\n      // Reset to initial data if provided\n      this.value = JSON.parse(JSON.stringify(this._parsedInitialData));\n    } else if (this._parsedSchema) {\n      this.value = this._getDefaultValue(this._parsedSchema);\n    } else {\n      this.value = undefined;\n    }\n    this._errors = [];\n    this._submitted = false;\n  }\n\n  /**\n   * Programmatically submit the form\n   */\n  submit(): void {\n    this._handleSubmit(new Event(\"submit\"));\n  }\n\n  /**\n   * Handle form submission\n   */\n  private _handleSubmit(e: Event): void {\n    e.preventDefault();\n\n    if (this.validate()) {\n      this._dispatchEvent(\"json-schema-form-submit\", { value: this.value });\n    }\n  }\n\n  /**\n   * Handle value changes from field renderers\n   */\n  private _handleValueChange(path: string, newValue: unknown): void {\n    // Update the value at the specified path\n    if (path === \"\") {\n      this.value = newValue;\n    } else {\n      // Clone and update nested value\n      this.value = this._setNestedValue(this.value, path, newValue);\n    }\n\n    this._dispatchEvent(\"json-schema-form-change\", {\n      value: this.value,\n      path,\n      changedValue: newValue,\n    });\n\n    if (this.validateOnChange || this._submitted) {\n      this._validate();\n    }\n  }\n\n  /**\n   * Set a nested value in an object\n   */\n  private _setNestedValue(obj: unknown, path: string, value: unknown): unknown {\n    const parts = path.split(\"/\").filter((p) => p !== \"\");\n\n    if (parts.length === 0) {\n      return value;\n    }\n\n    const clone = Array.isArray(obj) ? [...obj] : { ...(obj as object) };\n    let current: Record<string, unknown> | unknown[] = clone as Record<\n      string,\n      unknown\n    >;\n\n    for (let i = 0; i < parts.length - 1; i++) {\n      const part = parts[i];\n      const next = Array.isArray(current)\n        ? current[parseInt(part, 10)]\n        : (current as Record<string, unknown>)[part];\n\n      const cloned = Array.isArray(next) ? [...next] : { ...(next as object) };\n\n      if (Array.isArray(current)) {\n        current[parseInt(part, 10)] = cloned;\n      } else {\n        (current as Record<string, unknown>)[part] = cloned;\n      }\n\n      current = cloned as Record<string, unknown>;\n    }\n\n    const lastPart = parts[parts.length - 1];\n    if (Array.isArray(current)) {\n      current[parseInt(lastPart, 10)] = value;\n    } else {\n      (current as Record<string, unknown>)[lastPart] = value;\n    }\n\n    return clone;\n  }\n\n  /**\n   * Dispatch a custom event\n   */\n  private _dispatchEvent(name: string, detail: Record<string, unknown>): void {\n    this.dispatchEvent(\n      new CustomEvent(name, {\n        detail,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  /**\n   * Render the form\n   */\n  override render() {\n    if (this._parseError) {\n      return html`\n        <div class=\"jsf-error-container\" role=\"alert\">\n          <strong>Schema Error:</strong> ${this._parseError}\n        </div>\n      `;\n    }\n\n    if (this._initialDataError) {\n      return html`\n        <div class=\"jsf-error-container\" role=\"alert\">\n          <strong>Initial Data Error:</strong> ${this._initialDataError}\n        </div>\n      `;\n    }\n\n    if (!this._parsedSchema) {\n      return html` <div class=\"jsf-loading\">No schema provided</div> `;\n    }\n\n    return html`\n      <form\n        class=\"jsf-form\"\n        part=\"form\"\n        @submit=${this._handleSubmit}\n        novalidate\n      >\n        ${this._renderSchema(this._parsedSchema, \"\", this.value)}\n        ${this.showSubmit\n          ? html`\n              <div class=\"jsf-actions\" part=\"actions\">\n                <button\n                  type=\"submit\"\n                  class=\"jsf-button jsf-button--primary\"\n                  ?disabled=${!this.valid && this._submitted}\n                >\n                  ${this.submitText}\n                </button>\n              </div>\n            `\n          : \"\"}\n      </form>\n    `;\n  }\n\n  /**\n   * Render a schema at a given path\n   */\n  private _renderSchema(\n    schema: JSONSchema | boolean,\n    path: string,\n    value: unknown\n  ): unknown {\n    // Handle boolean schemas\n    if (typeof schema === \"boolean\") {\n      return schema\n        ? html``\n        : html`<div class=\"jsf-error\">This field is not allowed</div>`;\n    }\n\n    // Handle $ref\n    if (schema.$ref && this._parser) {\n      const resolved = this._parser.resolveRef(schema.$ref);\n      if (resolved) {\n        // Check for circular reference\n        if ((resolved as { _isCircular?: boolean })._isCircular) {\n          return html`\n            <div class=\"jsf-circular-ref\">\n              <svg\n                class=\"jsf-circular-ref-icon\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n              <span>Circular reference: ${schema.$ref}</span>\n            </div>\n          `;\n        }\n        return this._renderSchema(resolved, path, value);\n      }\n      return html`<div class=\"jsf-error\">\n        Unable to resolve reference: ${schema.$ref}\n      </div>`;\n    }\n\n    // Handle anyOf - render a selector if multiple options\n    if (schema.anyOf && schema.anyOf.length > 0) {\n      return this._renderAnyOfOneOf(schema, schema.anyOf, \"anyOf\", path, value);\n    }\n\n    // Handle oneOf - render a selector if multiple options\n    if (schema.oneOf && schema.oneOf.length > 0) {\n      return this._renderAnyOfOneOf(schema, schema.oneOf, \"oneOf\", path, value);\n    }\n\n    // Handle if/then/else conditional schemas\n    if (schema.if !== undefined) {\n      return this._renderConditional(schema, path, value);\n    }\n\n    // Determine type and render appropriate field\n    const types = SchemaParser.getTypes(schema);\n    const primaryType = types[0] || this._inferType(schema, value);\n\n    // Get errors for this path\n    const fieldErrors = this._errors.filter((e) => e.instancePath === path);\n\n    // Get field label (title or derived from field name)\n    const fieldLabel = this._getFieldLabel(schema, path);\n\n    return html`\n      <div\n        class=\"jsf-field ${schema.deprecated\n          ? \"jsf-deprecated\"\n          : \"\"} ${schema.readOnly ? \"jsf-readonly\" : \"\"}\"\n        part=\"field\"\n      >\n        ${fieldLabel\n          ? html`\n              <label\n                class=\"jsf-label ${schema.required?.length\n                  ? \"jsf-label-required\"\n                  : \"\"}\"\n                part=\"label\"\n              >\n                ${fieldLabel}\n              </label>\n            `\n          : \"\"}\n        ${this._renderFieldByType(primaryType, schema, path, value)}\n        ${schema.description\n          ? html` <p class=\"jsf-description\">${schema.description}</p> `\n          : \"\"}\n        ${fieldErrors.map(\n          (error) => html`\n            <div class=\"jsf-error\" part=\"error\" role=\"alert\">\n              <svg\n                class=\"jsf-error-icon\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n              ${error.message}\n            </div>\n          `\n        )}\n      </div>\n    `;\n  }\n\n  /**\n   * Infer type from schema keywords or value\n   */\n  private _inferType(schema: JSONSchema, value: unknown): string {\n    if (schema.properties || schema.additionalProperties || schema.required) {\n      return \"object\";\n    }\n    if (schema.items || schema.prefixItems) {\n      return \"array\";\n    }\n    if (schema.enum) {\n      return \"string\"; // Default enum to string\n    }\n\n    // Infer from value\n    if (value === null) return \"null\";\n    if (Array.isArray(value)) return \"array\";\n    return typeof value;\n  }\n\n  /**\n   * Render a field based on its type\n   */\n  private _renderFieldByType(\n    type: string,\n    schema: JSONSchema,\n    path: string,\n    value: unknown\n  ): unknown {\n    // Handle enum as select\n    if (schema.enum) {\n      return this._renderEnum(schema, path, value);\n    }\n\n    // Handle const as readonly\n    if (schema.const !== undefined) {\n      return this._renderConst(schema);\n    }\n\n    switch (type) {\n      case \"string\":\n        return this._renderString(schema, path, value as string);\n      case \"number\":\n      case \"integer\":\n        return this._renderNumber(\n          schema,\n          path,\n          value as number,\n          type === \"integer\"\n        );\n      case \"boolean\":\n        return this._renderBoolean(schema, path, value as boolean);\n      case \"object\":\n        return this._renderObject(\n          schema,\n          path,\n          value as Record<string, unknown>\n        );\n      case \"array\":\n        return this._renderArray(schema, path, value as unknown[]);\n      case \"null\":\n        return this._renderNull();\n      default:\n        return html`<div class=\"jsf-error\">Unsupported type: ${type}</div>`;\n    }\n  }\n\n  /**\n   * Render a string field\n   */\n  private _renderString(\n    schema: JSONSchema,\n    path: string,\n    value: string\n  ): unknown {\n    const hasError = this._errors.some((e) => e.instancePath === path);\n    const formatError = this._errors.find(\n      (e) => e.instancePath === path && e.keyword === \"format\"\n    );\n\n    // Use textarea for long strings\n    if (schema.maxLength && schema.maxLength > 100) {\n      return html`\n        <textarea\n          class=\"jsf-input jsf-textarea ${hasError ? \"jsf-input--error\" : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=${schema.examples?.[0] ?? \"\"}\n          minlength=${schema.minLength ?? \"\"}\n          maxlength=${schema.maxLength ?? \"\"}\n          @input=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLTextAreaElement).value\n            )}\n        ></textarea>\n      `;\n    }\n\n    // Render format-specific inputs\n    if (schema.format) {\n      return this._renderFormatInput(\n        schema,\n        path,\n        value,\n        hasError,\n        formatError?.message\n      );\n    }\n\n    return html`\n      <input\n        type=\"text\"\n        class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n        part=\"input\"\n        .value=${value ?? \"\"}\n        ?disabled=${schema.readOnly}\n        ?required=${this._isRequired(path)}\n        placeholder=${schema.examples?.[0] ?? \"\"}\n        minlength=${schema.minLength ?? \"\"}\n        maxlength=${schema.maxLength ?? \"\"}\n        pattern=${schema.pattern ?? \"\"}\n        @input=${(e: Event) =>\n          this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n      />\n    `;\n  }\n\n  /**\n   * Render format-specific input components\n   */\n  private _renderFormatInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean,\n    formatErrorMessage?: string\n  ): unknown {\n    const format = schema.format;\n    const examplePlaceholder = schema.examples?.[0];\n    const placeholder =\n      typeof examplePlaceholder === \"string\"\n        ? examplePlaceholder\n        : this._getFormatPlaceholder(format);\n\n    switch (format) {\n      case \"date\":\n        return this._renderDateInput(schema, path, value, hasError);\n\n      case \"time\":\n        return this._renderTimeInput(schema, path, value, hasError);\n\n      case \"date-time\":\n        return this._renderDateTimeInput(schema, path, value, hasError);\n\n      case \"email\":\n        return this._renderEmailInput(\n          schema,\n          path,\n          value,\n          hasError,\n          placeholder\n        );\n\n      case \"uri\":\n      case \"uri-reference\":\n      case \"iri\":\n      case \"iri-reference\":\n        return this._renderUriInput(\n          schema,\n          path,\n          value,\n          hasError,\n          placeholder,\n          format\n        );\n\n      case \"uuid\":\n        return this._renderUuidInput(schema, path, value, hasError);\n\n      case \"ipv4\":\n        return this._renderIpv4Input(schema, path, value, hasError);\n\n      case \"ipv6\":\n        return this._renderIpv6Input(schema, path, value, hasError);\n\n      case \"hostname\":\n      case \"idn-hostname\":\n        return this._renderHostnameInput(\n          schema,\n          path,\n          value,\n          hasError,\n          placeholder\n        );\n\n      case \"duration\":\n        return this._renderDurationInput(schema, path, value, hasError);\n\n      case \"regex\":\n        return this._renderRegexInput(schema, path, value, hasError);\n\n      case \"json-pointer\":\n      case \"relative-json-pointer\":\n        return this._renderJsonPointerInput(\n          schema,\n          path,\n          value,\n          hasError,\n          format\n        );\n\n      default:\n        // Unknown format - render as text\n        return html`\n          <input\n            type=\"text\"\n            class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n            part=\"input\"\n            .value=${value ?? \"\"}\n            ?disabled=${schema.readOnly}\n            ?required=${this._isRequired(path)}\n            placeholder=${placeholder}\n            @input=${(e: Event) =>\n              this._handleValueChange(\n                path,\n                (e.target as HTMLInputElement).value\n              )}\n          />\n        `;\n    }\n  }\n\n  /**\n   * Get placeholder text for a format\n   */\n  private _getFormatPlaceholder(format?: string): string {\n    switch (format) {\n      case \"date\":\n        return \"YYYY-MM-DD\";\n      case \"time\":\n        return \"HH:MM:SS\";\n      case \"date-time\":\n        return \"YYYY-MM-DDTHH:MM:SS\";\n      case \"email\":\n        return \"user@example.com\";\n      case \"uri\":\n      case \"iri\":\n        return \"https://example.com\";\n      case \"uri-reference\":\n      case \"iri-reference\":\n        return \"/path/to/resource\";\n      case \"uuid\":\n        return \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\";\n      case \"ipv4\":\n        return \"192.168.1.1\";\n      case \"ipv6\":\n        return \"2001:0db8:85a3::8a2e:0370:7334\";\n      case \"hostname\":\n      case \"idn-hostname\":\n        return \"example.com\";\n      case \"duration\":\n        return \"P1Y2M3DT4H5M6S\";\n      case \"regex\":\n        return \"^[a-z]+$\";\n      case \"json-pointer\":\n        return \"/path/to/value\";\n      case \"relative-json-pointer\":\n        return \"1/path\";\n      default:\n        return \"\";\n    }\n  }\n\n  /**\n   * Render date input with picker\n   */\n  private _renderDateInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-date\">\n        <input\n          type=\"date\"\n          class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n        <span class=\"jsf-format-icon\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      </div>\n    `;\n  }\n\n  /**\n   * Render time input with picker\n   */\n  private _renderTimeInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    // Convert full time format to HTML time input format (HH:MM)\n    const htmlValue = value ? value.substring(0, 5) : \"\";\n\n    return html`\n      <div class=\"jsf-format-input jsf-format-time\">\n        <input\n          type=\"time\"\n          class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n          part=\"input\"\n          .value=${htmlValue}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          step=\"1\"\n          @input=${(e: Event) => {\n            const inputValue = (e.target as HTMLInputElement).value;\n            // Convert to full time format with seconds\n            const fullTime = inputValue ? `${inputValue}:00` : \"\";\n            this._handleValueChange(path, fullTime);\n          }}\n        />\n        <span class=\"jsf-format-icon\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      </div>\n    `;\n  }\n\n  /**\n   * Render date-time input with picker\n   */\n  private _renderDateTimeInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    // Convert ISO format to datetime-local format\n    const htmlValue = value\n      ? value\n          .replace(\"Z\", \"\")\n          .replace(/[+-]\\d{2}:\\d{2}$/, \"\")\n          .substring(0, 16)\n      : \"\";\n\n    return html`\n      <div class=\"jsf-format-input jsf-format-datetime\">\n        <input\n          type=\"datetime-local\"\n          class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n          part=\"input\"\n          .value=${htmlValue}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          @input=${(e: Event) => {\n            const inputValue = (e.target as HTMLInputElement).value;\n            // Convert to ISO format\n            const isoValue = inputValue ? `${inputValue}:00` : \"\";\n            this._handleValueChange(path, isoValue);\n          }}\n        />\n        <span class=\"jsf-format-icon\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n      </div>\n    `;\n  }\n\n  /**\n   * Render email input with icon\n   */\n  private _renderEmailInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean,\n    placeholder: string\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-email\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              d=\"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z\"\n            />\n            <path d=\"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z\" />\n          </svg>\n        </span>\n        <input\n          type=\"email\"\n          class=\"jsf-input jsf-input--with-icon ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=${placeholder}\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render URI input with icon\n   */\n  private _renderUriInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean,\n    placeholder: string,\n    format: string\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-uri\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n        <input\n          type=\"url\"\n          class=\"jsf-input jsf-input--with-icon ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=${placeholder}\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n        ${value && !hasError\n          ? html`\n              <a\n                href=${value}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                class=\"jsf-format-action\"\n                title=\"Open link\"\n              >\n                <svg\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                  width=\"14\"\n                  height=\"14\"\n                >\n                  <path\n                    d=\"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z\"\n                  />\n                  <path\n                    d=\"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z\"\n                  />\n                </svg>\n              </a>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  /**\n   * Render UUID input with generate button\n   */\n  private _renderUuidInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-uuid\">\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n          pattern=\"^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$\"\n          @input=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLInputElement).value.toLowerCase()\n            )}\n        />\n        ${!schema.readOnly\n          ? html`\n              <button\n                type=\"button\"\n                class=\"jsf-format-action jsf-format-action--button\"\n                title=\"Generate UUID\"\n                @click=${() =>\n                  this._handleValueChange(path, this._generateUuid())}\n              >\n                <svg\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                  width=\"14\"\n                  height=\"14\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\"\n                    clip-rule=\"evenodd\"\n                  />\n                </svg>\n              </button>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  /**\n   * Generate a random UUID v4\n   */\n  private _generateUuid(): string {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n      const r = (Math.random() * 16) | 0;\n      const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Render IPv4 input with segmented display\n   */\n  private _renderIpv4Input(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-ip\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.56-.5-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.56.5.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.498-.623.737-1.182.389-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 13.97 6.118 12.546 6.03 11H4.083a6.004 6.004 0 002.783 4.118z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--with-icon jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=\"192.168.1.1\"\n          pattern=\"^(\\\\d{1,3}\\\\.){3}\\\\d{1,3}$\"\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render IPv6 input\n   */\n  private _renderIpv6Input(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-ip\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M4.083 9h1.946c.089-1.546.383-2.97.837-4.118A6.004 6.004 0 004.083 9zM10 2a8 8 0 100 16 8 8 0 000-16zm0 2c-.076 0-.232.032-.465.262-.238.234-.497.623-.737 1.182-.389.907-.673 2.142-.766 3.556h3.936c-.093-1.414-.377-2.649-.766-3.556-.24-.56-.5-.948-.737-1.182C10.232 4.032 10.076 4 10 4zm3.971 5c-.089-1.546-.383-2.97-.837-4.118A6.004 6.004 0 0115.917 9h-1.946zm-2.003 2H8.032c.093 1.414.377 2.649.766 3.556.24.56.5.948.737 1.182.233.23.389.262.465.262.076 0 .232-.032.465-.262.238-.234.498-.623.737-1.182.389-.907.673-2.142.766-3.556zm1.166 4.118c.454-1.147.748-2.572.837-4.118h1.946a6.004 6.004 0 01-2.783 4.118zm-6.268 0C6.412 13.97 6.118 12.546 6.03 11H4.083a6.004 6.004 0 002.783 4.118z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--with-icon jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=\"2001:0db8:85a3::8a2e:0370:7334\"\n          @input=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLInputElement).value.toLowerCase()\n            )}\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render hostname input\n   */\n  private _renderHostnameInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean,\n    placeholder: string\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-hostname\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm3.293 1.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L7.586 10 5.293 7.707a1 1 0 010-1.414zM11 12a1 1 0 100 2h3a1 1 0 100-2h-3z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--with-icon ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=${placeholder}\n          @input=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLInputElement).value.toLowerCase()\n            )}\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render duration input with helper\n   */\n  private _renderDurationInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-duration\">\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=\"P1Y2M3DT4H5M6S\"\n          @input=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLInputElement).value.toUpperCase()\n            )}\n        />\n        <span class=\"jsf-format-hint\">\n          ISO 8601: P[years]Y[months]M[days]DT[hours]H[minutes]M[seconds]S\n        </span>\n      </div>\n    `;\n  }\n\n  /**\n   * Render regex input with test functionality\n   */\n  private _renderRegexInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-format-input jsf-format-regex\">\n        <span\n          class=\"jsf-format-icon jsf-format-icon--left jsf-format-icon--regex\"\n          >/</span\n        >\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--with-icon jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=\"^[a-z]+$\"\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n        <span class=\"jsf-format-icon jsf-format-icon--regex\">/</span>\n      </div>\n    `;\n  }\n\n  /**\n   * Render JSON Pointer input\n   */\n  private _renderJsonPointerInput(\n    schema: JSONSchema,\n    path: string,\n    value: string,\n    hasError: boolean,\n    format: string\n  ): unknown {\n    const placeholder =\n      format === \"relative-json-pointer\" ? \"1/path/to/value\" : \"/path/to/value\";\n\n    return html`\n      <div class=\"jsf-format-input jsf-format-json-pointer\">\n        <span class=\"jsf-format-icon jsf-format-icon--left\">\n          <svg viewBox=\"0 0 20 20\" fill=\"currentColor\" width=\"16\" height=\"16\">\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n        </span>\n        <input\n          type=\"text\"\n          class=\"jsf-input jsf-input--with-icon jsf-input--monospace ${hasError\n            ? \"jsf-input--error\"\n            : \"\"}\"\n          part=\"input\"\n          .value=${value ?? \"\"}\n          ?disabled=${schema.readOnly}\n          ?required=${this._isRequired(path)}\n          placeholder=${placeholder}\n          @input=${(e: Event) =>\n            this._handleValueChange(path, (e.target as HTMLInputElement).value)}\n        />\n      </div>\n    `;\n  }\n\n  /**\n   * Render a number field\n   */\n  private _renderNumber(\n    schema: JSONSchema,\n    path: string,\n    value: number,\n    isInteger: boolean\n  ): unknown {\n    const hasError = this._errors.some((e) => e.instancePath === path);\n\n    return html`\n      <input\n        type=\"number\"\n        class=\"jsf-input ${hasError ? \"jsf-input--error\" : \"\"}\"\n        part=\"input\"\n        .value=${value?.toString() ?? \"\"}\n        ?disabled=${schema.readOnly}\n        ?required=${this._isRequired(path)}\n        min=${schema.minimum ?? schema.exclusiveMinimum ?? \"\"}\n        max=${schema.maximum ?? schema.exclusiveMaximum ?? \"\"}\n        step=${isInteger ? \"1\" : schema.multipleOf ?? \"any\"}\n        @input=${(e: Event) => {\n          const val = (e.target as HTMLInputElement).value;\n          const num = isInteger ? parseInt(val, 10) : parseFloat(val);\n          this._handleValueChange(path, isNaN(num) ? undefined : num);\n        }}\n      />\n    `;\n  }\n\n  /**\n   * Render a boolean field\n   */\n  private _renderBoolean(\n    schema: JSONSchema,\n    path: string,\n    value: boolean\n  ): unknown {\n    return html`\n      <div class=\"jsf-checkbox-wrapper\">\n        <input\n          type=\"checkbox\"\n          class=\"jsf-checkbox\"\n          part=\"input\"\n          .checked=${value ?? false}\n          ?disabled=${schema.readOnly}\n          @change=${(e: Event) =>\n            this._handleValueChange(\n              path,\n              (e.target as HTMLInputElement).checked\n            )}\n        />\n        ${!schema.title && schema.description\n          ? html`\n              <span class=\"jsf-checkbox-label\">${schema.description}</span>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  /**\n   * Render an enum field\n   */\n  private _renderEnum(\n    schema: JSONSchema,\n    path: string,\n    value: unknown\n  ): unknown {\n    const hasError = this._errors.some((e) => e.instancePath === path);\n\n    return html`\n      <select\n        class=\"jsf-input jsf-select ${hasError ? \"jsf-input--error\" : \"\"}\"\n        part=\"input\"\n        ?disabled=${schema.readOnly}\n        ?required=${this._isRequired(path)}\n        @change=${(e: Event) => {\n          const selected = (e.target as HTMLSelectElement).value;\n          // Try to preserve the original type\n          const enumValue = schema.enum?.find((v) => String(v) === selected);\n          this._handleValueChange(path, enumValue);\n        }}\n      >\n        <option value=\"\" ?selected=${value === undefined}>Select...</option>\n        ${schema.enum?.map(\n          (option) => html`\n            <option value=${String(option)} ?selected=${value === option}>\n              ${String(option)}\n            </option>\n          `\n        )}\n      </select>\n    `;\n  }\n\n  /**\n   * Render a const field (readonly display)\n   */\n  private _renderConst(schema: JSONSchema): unknown {\n    return html`\n      <input\n        type=\"text\"\n        class=\"jsf-input\"\n        part=\"input\"\n        .value=${String(schema.const)}\n        disabled\n        readonly\n      />\n    `;\n  }\n\n  /**\n   * Render a null field\n   */\n  private _renderNull(): unknown {\n    return html`\n      <input\n        type=\"text\"\n        class=\"jsf-input\"\n        part=\"input\"\n        value=\"null\"\n        disabled\n        readonly\n      />\n    `;\n  }\n\n  /**\n   * Render an object field\n   */\n  private _renderObject(\n    schema: JSONSchema,\n    path: string,\n    value: Record<string, unknown>\n  ): unknown {\n    const currentValue = value || {};\n\n    // Collect all properties to render (including from dependentSchemas)\n    const effectiveSchema = this._getEffectiveObjectSchema(\n      schema,\n      currentValue\n    );\n    const properties = effectiveSchema.properties || {};\n\n    // Identify additional properties (properties in value not defined in schema)\n    const definedProps = new Set(Object.keys(properties));\n    const additionalProps = Object.keys(currentValue).filter(\n      (key) => !definedProps.has(key)\n    );\n\n    // Check if we can add additional properties\n    const canAddProps = this._canAddProperty(\n      schema,\n      Object.keys(currentValue).length\n    );\n\n    // Get propertyNames schema for validation hints\n    const propertyNamesSchema = schema.propertyNames;\n\n    // Check if this should be collapsible (nested objects with titles)\n    const isNested = path !== \"\";\n    const hasTitle = Boolean(schema.title);\n    const shouldCollapse = isNested && hasTitle;\n\n    const objectContent = html`\n      <div class=\"jsf-object ${shouldCollapse ? \"jsf-object--nested\" : \"\"}\">\n        ${Object.entries(properties).map(([propName, propSchema]) => {\n          if (typeof propSchema === \"boolean\") {\n            return propSchema ? html`` : html``;\n          }\n\n          const propPath = path ? `${path}/${propName}` : propName;\n          const propValue = currentValue[propName];\n\n          // Check if this property is a nested object that should be collapsible\n          const propTypes = SchemaParser.getTypes(propSchema);\n          const isNestedObject =\n            propTypes.includes(\"object\") && propSchema.properties;\n\n          // Add required indicator to schema for rendering\n          const schemaWithRequired = {\n            ...propSchema,\n            _isRequired: effectiveSchema.required?.includes(propName),\n          };\n\n          // Render nested objects with collapsible wrapper\n          if (isNestedObject && propSchema.title) {\n            const nestedContent = this._renderSchema(\n              { ...schemaWithRequired, title: undefined },\n              propPath,\n              propValue\n            );\n            return this._renderCollapsible(\n              propPath,\n              propSchema.title,\n              nestedContent,\n              this._getObjectSummary(propValue as Record<string, unknown>)\n            );\n          }\n\n          return this._renderSchema(schemaWithRequired, propPath, propValue);\n        })}\n        ${additionalProps.map((propName) => {\n          const propPath = path ? `${path}/${propName}` : propName;\n          const propValue = currentValue[propName];\n\n          // Get schema for this property (check patternProperties first)\n          const propSchema = this._getSchemaForProperty(\n            schema,\n            propName,\n            propValue\n          );\n          const matchedPattern = this._getMatchingPattern(schema, propName);\n\n          return html`\n            <div\n              class=\"jsf-additional-property ${matchedPattern\n                ? \"jsf-pattern-property\"\n                : \"\"}\"\n            >\n              <div class=\"jsf-additional-property-header\">\n                <span class=\"jsf-additional-property-name\">\n                  ${propName}\n                  ${matchedPattern\n                    ? html`<span\n                        class=\"jsf-pattern-badge\"\n                        title=\"Matches pattern: ${matchedPattern}\"\n                        ></span\n                      >`\n                    : \"\"}\n                </span>\n                <button\n                  type=\"button\"\n                  class=\"jsf-icon-button jsf-icon-button--danger\"\n                  title=\"Remove property\"\n                  @click=${() => this._removeProperty(path, propName)}\n                >\n                  <svg\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fill-rule=\"evenodd\"\n                      d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                      clip-rule=\"evenodd\"\n                    />\n                  </svg>\n                </button>\n              </div>\n              ${this._renderSchema(propSchema, propPath, propValue)}\n            </div>\n          `;\n        })}\n        ${canAddProps\n          ? html`\n              <div class=\"jsf-add-property\">\n                <input\n                  type=\"text\"\n                  id=\"${path}-add-prop-input\"\n                  class=\"jsf-input jsf-add-property-input\"\n                  placeholder=${this._getPropertyNamePlaceholder(\n                    propertyNamesSchema\n                  )}\n                  pattern=${this._getPropertyNamePattern(propertyNamesSchema)}\n                  @keydown=${(e: KeyboardEvent) => {\n                    if (e.key === \"Enter\") {\n                      e.preventDefault();\n                      const input = e.target as HTMLInputElement;\n                      const error = this._validatePropertyName(\n                        schema,\n                        input.value,\n                        Object.keys(currentValue)\n                      );\n                      if (error) {\n                        this._showPropertyNameError(input, error);\n                      } else {\n                        this._addProperty(path, schema, input.value);\n                        input.value = \"\";\n                      }\n                    }\n                  }}\n                />\n                <button\n                  type=\"button\"\n                  class=\"jsf-button jsf-button--secondary\"\n                  @click=${(e: Event) => {\n                    const input = (e.target as HTMLElement)\n                      .previousElementSibling as HTMLInputElement;\n                    if (input.value) {\n                      const error = this._validatePropertyName(\n                        schema,\n                        input.value,\n                        Object.keys(currentValue)\n                      );\n                      if (error) {\n                        this._showPropertyNameError(input, error);\n                      } else {\n                        this._addProperty(path, schema, input.value);\n                        input.value = \"\";\n                      }\n                    }\n                  }}\n                >\n                  <svg\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fill-rule=\"evenodd\"\n                      d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\"\n                      clip-rule=\"evenodd\"\n                    />\n                  </svg>\n                  Add Property\n                </button>\n              </div>\n            `\n          : \"\"}\n      </div>\n    `;\n\n    return objectContent;\n  }\n\n  /**\n   * Check if we can add more properties to an object\n   */\n  private _canAddProperty(schema: JSONSchema, currentCount: number): boolean {\n    // Check if additionalProperties is allowed\n    if (schema.additionalProperties === false && !schema.patternProperties) {\n      return false;\n    }\n\n    // Check maxProperties constraint\n    if (\n      schema.maxProperties !== undefined &&\n      currentCount >= schema.maxProperties\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Get the schema for a property (checking patternProperties)\n   */\n  private _getSchemaForProperty(\n    schema: JSONSchema,\n    propName: string,\n    propValue: unknown\n  ): JSONSchema {\n    // Check if it matches any patternProperties\n    if (schema.patternProperties) {\n      for (const [pattern, patternSchema] of Object.entries(\n        schema.patternProperties\n      )) {\n        try {\n          const regex = new RegExp(pattern, \"u\");\n          if (regex.test(propName)) {\n            if (typeof patternSchema === \"boolean\") {\n              return patternSchema ? {} : { not: {} };\n            }\n            return patternSchema;\n          }\n        } catch {\n          // Invalid regex, skip\n        }\n      }\n    }\n\n    // Fall back to additionalProperties schema\n    if (typeof schema.additionalProperties === \"object\") {\n      return schema.additionalProperties;\n    }\n\n    // Infer from value\n    return this._inferSchemaFromValue(propValue);\n  }\n\n  /**\n   * Get the matching pattern for a property name\n   */\n  private _getMatchingPattern(\n    schema: JSONSchema,\n    propName: string\n  ): string | null {\n    if (!schema.patternProperties) return null;\n\n    for (const pattern of Object.keys(schema.patternProperties)) {\n      try {\n        const regex = new RegExp(pattern, \"u\");\n        if (regex.test(propName)) {\n          return pattern;\n        }\n      } catch {\n        // Invalid regex, skip\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Get placeholder text for property name input\n   */\n  private _getPropertyNamePlaceholder(\n    propertyNamesSchema: JSONSchema | boolean | undefined\n  ): string {\n    if (!propertyNamesSchema || typeof propertyNamesSchema === \"boolean\") {\n      return \"New property name\";\n    }\n\n    if (propertyNamesSchema.pattern) {\n      return `Property name (pattern: ${propertyNamesSchema.pattern})`;\n    }\n\n    return \"New property name\";\n  }\n\n  /**\n   * Get pattern attribute for property name input\n   */\n  private _getPropertyNamePattern(\n    propertyNamesSchema: JSONSchema | boolean | undefined\n  ): string {\n    if (!propertyNamesSchema || typeof propertyNamesSchema === \"boolean\") {\n      return \"\";\n    }\n\n    return propertyNamesSchema.pattern || \"\";\n  }\n\n  /**\n   * Validate a property name against propertyNames schema\n   */\n  private _validatePropertyName(\n    schema: JSONSchema,\n    propName: string,\n    existingProps: string[]\n  ): string | null {\n    const trimmed = propName.trim();\n\n    if (!trimmed) {\n      return \"Property name cannot be empty\";\n    }\n\n    if (existingProps.includes(trimmed)) {\n      return \"Property already exists\";\n    }\n\n    // Check propertyNames schema\n    if (schema.propertyNames && typeof schema.propertyNames !== \"boolean\") {\n      const nameSchema = schema.propertyNames;\n\n      if (nameSchema.pattern) {\n        const regex = new RegExp(nameSchema.pattern, \"u\");\n        if (!regex.test(trimmed)) {\n          return `Property name must match pattern: ${nameSchema.pattern}`;\n        }\n      }\n\n      if (nameSchema.minLength && trimmed.length < nameSchema.minLength) {\n        return `Property name must be at least ${nameSchema.minLength} characters`;\n      }\n\n      if (nameSchema.maxLength && trimmed.length > nameSchema.maxLength) {\n        return `Property name must be at most ${nameSchema.maxLength} characters`;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Show an error message for property name validation\n   */\n  private _showPropertyNameError(input: HTMLInputElement, error: string): void {\n    // Add error styling\n    input.classList.add(\"jsf-input--error\");\n\n    // Show native validation message\n    input.setCustomValidity(error);\n    input.reportValidity();\n\n    // Remove error styling after a delay\n    setTimeout(() => {\n      input.classList.remove(\"jsf-input--error\");\n      input.setCustomValidity(\"\");\n    }, 3000);\n  }\n\n  /**\n   * Toggle a collapsible section\n   */\n  private _toggleCollapsible(path: string): void {\n    if (this._collapsedSections.has(path)) {\n      this._collapsedSections.delete(path);\n    } else {\n      this._collapsedSections.add(path);\n    }\n    this._collapsedSections = new Set(this._collapsedSections);\n  }\n\n  /**\n   * Check if a section is expanded\n   */\n  private _isExpanded(path: string): boolean {\n    return !this._collapsedSections.has(path);\n  }\n\n  /**\n   * Render a collapsible wrapper for nested content\n   */\n  private _renderCollapsible(\n    path: string,\n    title: string,\n    content: unknown,\n    summary?: string\n  ): unknown {\n    const isExpanded = this._isExpanded(path);\n\n    return html`\n      <div\n        class=\"jsf-collapsible ${isExpanded ? \"jsf-collapsible--expanded\" : \"\"}\"\n      >\n        <div\n          class=\"jsf-collapsible-header\"\n          @click=${() => this._toggleCollapsible(path)}\n          @keydown=${(e: KeyboardEvent) => {\n            if (e.key === \"Enter\" || e.key === \" \") {\n              e.preventDefault();\n              this._toggleCollapsible(path);\n            }\n          }}\n          tabindex=\"0\"\n          role=\"button\"\n          aria-expanded=${isExpanded}\n        >\n          <svg\n            class=\"jsf-collapsible-icon\"\n            viewBox=\"0 0 20 20\"\n            fill=\"currentColor\"\n          >\n            <path\n              fill-rule=\"evenodd\"\n              d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\n              clip-rule=\"evenodd\"\n            />\n          </svg>\n          <span class=\"jsf-collapsible-title\">${title}</span>\n          ${summary\n            ? html`<span class=\"jsf-collapsible-summary\">${summary}</span>`\n            : \"\"}\n        </div>\n        <div class=\"jsf-collapsible-content\">${content}</div>\n      </div>\n    `;\n  }\n\n  /**\n   * Get a summary of an object value for collapsed display\n   */\n  private _getObjectSummary(value: Record<string, unknown>): string {\n    const keys = Object.keys(value || {});\n    if (keys.length === 0) return \"Empty\";\n    if (keys.length <= 3) {\n      return keys.join(\", \");\n    }\n    return `${keys.slice(0, 3).join(\", \")} +${keys.length - 3} more`;\n  }\n\n  /**\n   * Infer a schema from a value (for additional properties)\n   */\n  private _inferSchemaFromValue(value: unknown): JSONSchema {\n    if (value === null) return { type: \"null\" };\n    if (Array.isArray(value)) return { type: \"array\" };\n\n    const type = typeof value;\n    if (type === \"number\" && Number.isInteger(value)) {\n      return { type: \"integer\" };\n    }\n    if (type === \"string\" || type === \"number\" || type === \"boolean\") {\n      return { type: type as \"string\" | \"number\" | \"boolean\" };\n    }\n    if (type === \"object\") {\n      return { type: \"object\" };\n    }\n\n    return { type: \"string\" }; // Default to string\n  }\n\n  /**\n   * Add a new property to an object\n   */\n  private _addProperty(\n    path: string,\n    schema: JSONSchema,\n    propName: string\n  ): void {\n    if (!propName.trim()) return;\n\n    const sanitizedName = propName.trim();\n    const currentValue =\n      ((path ? this._getNestedValue(this.value, path) : this.value) as Record<\n        string,\n        unknown\n      >) || {};\n\n    // Don't add if property already exists\n    if (sanitizedName in currentValue) return;\n\n    // Get the appropriate schema for this property name\n    const propSchema = this._getSchemaForProperty(\n      schema,\n      sanitizedName,\n      undefined\n    );\n\n    // Get default value based on the resolved schema\n    const defaultValue = this._getDefaultValue(propSchema);\n\n    const newValue = { ...currentValue, [sanitizedName]: defaultValue };\n    this._handleValueChange(path, newValue);\n  }\n\n  /**\n   * Remove a property from an object\n   */\n  private _removeProperty(path: string, propName: string): void {\n    const currentValue =\n      ((path ? this._getNestedValue(this.value, path) : this.value) as Record<\n        string,\n        unknown\n      >) || {};\n\n    const { [propName]: _, ...rest } = currentValue;\n    this._handleValueChange(path, rest);\n  }\n\n  /**\n   * Get effective object schema after applying dependentSchemas\n   */\n  private _getEffectiveObjectSchema(\n    schema: JSONSchema,\n    value: Record<string, unknown>\n  ): JSONSchema {\n    let effectiveSchema = { ...schema };\n\n    // Apply dependentSchemas\n    if (schema.dependentSchemas) {\n      for (const [propName, depSchema] of Object.entries(\n        schema.dependentSchemas\n      )) {\n        // Only apply if the property exists in the value\n        if (propName in value && value[propName] !== undefined) {\n          if (typeof depSchema !== \"boolean\" && depSchema) {\n            effectiveSchema = this._mergeSchemas(effectiveSchema, depSchema);\n          }\n        }\n      }\n    }\n\n    return effectiveSchema;\n  }\n\n  /**\n   * Render an array field\n   */\n  private _renderArray(\n    schema: JSONSchema,\n    path: string,\n    value: unknown[]\n  ): unknown {\n    const currentValue = value || [];\n    const prefixItems = schema.prefixItems || [];\n    const hasPrefixItems = prefixItems.length > 0;\n\n    // For tuple-style arrays with prefixItems, calculate add constraints\n    const canAddMore = this._canAddArrayItem(schema, currentValue.length);\n    const canRemoveItem = (index: number) =>\n      this._canRemoveArrayItem(schema, currentValue.length, index);\n\n    return html`\n      <div class=\"jsf-array ${hasPrefixItems ? \"jsf-array--tuple\" : \"\"}\">\n        ${currentValue.map((item, index) => {\n          // Determine the schema for this item\n          const itemSchema = this._getArrayItemSchema(schema, index);\n          const isPrefixItem = index < prefixItems.length;\n\n          return html`\n            <div\n              class=\"jsf-array-item ${isPrefixItem\n                ? \"jsf-array-item--prefix\"\n                : \"\"}\"\n            >\n              ${isPrefixItem\n                ? html`<span class=\"jsf-array-item-index\">${index + 1}</span>`\n                : \"\"}\n              <div class=\"jsf-array-item-content\">\n                ${this._renderSchema(itemSchema, `${path}/${index}`, item)}\n              </div>\n              <div class=\"jsf-array-item-actions\">\n                ${canRemoveItem(index)\n                  ? html`\n                      <button\n                        type=\"button\"\n                        class=\"jsf-icon-button jsf-icon-button--danger\"\n                        title=\"Remove item\"\n                        @click=${() => this._removeArrayItem(path, index)}\n                      >\n                        <svg\n                          width=\"16\"\n                          height=\"16\"\n                          viewBox=\"0 0 20 20\"\n                          fill=\"currentColor\"\n                        >\n                          <path\n                            fill-rule=\"evenodd\"\n                            d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\"\n                            clip-rule=\"evenodd\"\n                          />\n                        </svg>\n                      </button>\n                    `\n                  : \"\"}\n              </div>\n            </div>\n          `;\n        })}\n        ${canAddMore\n          ? html`\n              <button\n                type=\"button\"\n                class=\"jsf-button jsf-button--secondary jsf-array-add\"\n                @click=${() => this._addArrayItem(path, schema)}\n              >\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 20 20\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\"\n                    clip-rule=\"evenodd\"\n                  />\n                </svg>\n                Add Item\n              </button>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  /**\n   * Get the schema for an array item at a specific index\n   * Handles prefixItems (tuple validation) and items\n   */\n  private _getArrayItemSchema(\n    schema: JSONSchema,\n    index: number\n  ): JSONSchema | boolean {\n    const prefixItems = schema.prefixItems || [];\n\n    // If within prefixItems range, use that schema\n    if (index < prefixItems.length) {\n      return prefixItems[index];\n    }\n\n    // For items beyond prefixItems, use 'items' schema\n    // If items is not specified and we have prefixItems, additional items may not be allowed\n    if (schema.items !== undefined) {\n      return schema.items;\n    }\n\n    // Default: allow any item\n    return {};\n  }\n\n  /**\n   * Check if we can add more items to an array\n   */\n  private _canAddArrayItem(schema: JSONSchema, currentLength: number): boolean {\n    // Check maxItems constraint\n    if (schema.maxItems !== undefined && currentLength >= schema.maxItems) {\n      return false;\n    }\n\n    // If items is explicitly false and we're beyond prefixItems, can't add\n    const prefixLength = schema.prefixItems?.length || 0;\n    if (currentLength >= prefixLength && schema.items === false) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Check if we can remove an item at a specific index\n   */\n  private _canRemoveArrayItem(\n    schema: JSONSchema,\n    currentLength: number,\n    index: number\n  ): boolean {\n    // Check minItems constraint\n    if (schema.minItems !== undefined && currentLength <= schema.minItems) {\n      return false;\n    }\n\n    // For prefixItems, we generally don't want to remove them\n    // unless removing from the end\n    const prefixLength = schema.prefixItems?.length || 0;\n    if (index < prefixLength && currentLength <= prefixLength) {\n      // Can only remove if we're above the required prefix length\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Render anyOf/oneOf with a schema selector\n   */\n  private _renderAnyOfOneOf(\n    parentSchema: JSONSchema,\n    schemas: (JSONSchema | boolean)[],\n    keyword: \"anyOf\" | \"oneOf\",\n    path: string,\n    value: unknown\n  ): unknown {\n    // Filter out boolean schemas and get valid schema options\n    const validSchemas = schemas\n      .map((s, i) => ({ schema: s, index: i }))\n      .filter((s) => typeof s.schema !== \"boolean\" || s.schema);\n\n    if (validSchemas.length === 0) {\n      return html`<div class=\"jsf-error\">No valid schemas in ${keyword}</div>`;\n    }\n\n    // Get the currently selected schema index, defaulting to first option or auto-detect\n    let selectedIndex = this._schemaSelections.get(path);\n    let shouldInitializeValue = false;\n    if (selectedIndex === undefined) {\n      // Try to auto-detect which schema matches the current value\n      selectedIndex = this._detectMatchingSchema(validSchemas, value);\n      this._schemaSelections.set(path, selectedIndex);\n      // If value is undefined/null or empty object, we should initialize it\n      shouldInitializeValue =\n        value === undefined ||\n        value === null ||\n        (typeof value === \"object\" &&\n          !Array.isArray(value) &&\n          Object.keys(value as object).length === 0);\n    }\n\n    const selectedOption = validSchemas[selectedIndex] || validSchemas[0];\n    const selectedSchema =\n      typeof selectedOption.schema === \"boolean\" ? {} : selectedOption.schema;\n\n    // Initialize value with defaults from selected schema if needed\n    // This ensures required properties with const values are populated\n    if (shouldInitializeValue && typeof selectedOption.schema !== \"boolean\") {\n      const defaultValue = this._getDefaultValue(selectedOption.schema);\n      // Use setTimeout to avoid updating state during render\n      setTimeout(() => this._handleValueChange(path, defaultValue), 0);\n      // Use the default value for rendering\n      value = defaultValue;\n    }\n\n    // Get labels for options\n    const optionLabels = validSchemas.map((opt, idx) => {\n      if (typeof opt.schema === \"boolean\") {\n        return `Option ${idx + 1}`;\n      }\n      return (\n        opt.schema.title ||\n        opt.schema.description?.slice(0, 30) ||\n        this._getSchemaTypeLabel(opt.schema) ||\n        `Option ${idx + 1}`\n      );\n    });\n\n    const hasError = this._errors.some((e) => e.instancePath === path);\n\n    return html`\n      <div class=\"jsf-composition\">\n        ${parentSchema.title\n          ? html`<label class=\"jsf-label\">${parentSchema.title}</label>`\n          : \"\"}\n        <div class=\"jsf-composition-selector\">\n          <select\n            class=\"jsf-input jsf-select ${hasError ? \"jsf-input--error\" : \"\"}\"\n            part=\"input\"\n            @change=${(e: Event) => {\n              const newIndex = parseInt(\n                (e.target as HTMLSelectElement).value,\n                10\n              );\n              this._handleSchemaSelection(path, newIndex, validSchemas);\n            }}\n          >\n            ${validSchemas.map(\n              (opt, idx) => html`\n                <option value=${idx} ?selected=${idx === selectedIndex}>\n                  ${optionLabels[idx]}\n                </option>\n              `\n            )}\n          </select>\n        </div>\n        <div class=\"jsf-composition-content\">\n          ${this._renderSchema(selectedSchema, path, value)}\n        </div>\n        ${parentSchema.description\n          ? html`<p class=\"jsf-description\">${parentSchema.description}</p>`\n          : \"\"}\n      </div>\n    `;\n  }\n\n  /**\n   * Try to detect which schema in an anyOf/oneOf matches the current value\n   */\n  private _detectMatchingSchema(\n    schemas: { schema: JSONSchema | boolean; index: number }[],\n    value: unknown\n  ): number {\n    if (value === undefined || value === null) {\n      return 0;\n    }\n\n    // Try each schema and return the first one that validates without errors\n    for (let i = 0; i < schemas.length; i++) {\n      const schema = schemas[i].schema;\n      if (typeof schema === \"boolean\") continue;\n\n      // Quick type check first\n      const types = SchemaParser.getTypes(schema);\n      const valueType = this._getValueType(value);\n\n      if (types.length === 0 || types.includes(valueType)) {\n        // If types match, do a quick validation\n        if (this._validator) {\n          const errors = this._validator.validate(value, schema);\n          if (errors.length === 0) {\n            return i;\n          }\n        } else {\n          return i;\n        }\n      }\n    }\n\n    return 0;\n  }\n\n  /**\n   * Get the JSON type of a value\n   */\n  private _getValueType(value: unknown): string {\n    if (value === null) return \"null\";\n    if (Array.isArray(value)) return \"array\";\n    const type = typeof value;\n    if (type === \"number\" && Number.isInteger(value)) return \"integer\";\n    return type;\n  }\n\n  /**\n   * Get a label describing a schema's type\n   */\n  private _getSchemaTypeLabel(schema: JSONSchema): string {\n    const types = SchemaParser.getTypes(schema);\n    if (types.length > 0) {\n      return types.join(\" | \");\n    }\n    if (schema.enum) {\n      return \"enum\";\n    }\n    if (schema.const !== undefined) {\n      return `const: ${JSON.stringify(schema.const)}`;\n    }\n    if (schema.properties) {\n      return \"object\";\n    }\n    if (schema.items) {\n      return \"array\";\n    }\n    return \"\";\n  }\n\n  /**\n   * Handle schema selection change in anyOf/oneOf\n   */\n  private _handleSchemaSelection(\n    path: string,\n    newIndex: number,\n    validSchemas: { schema: JSONSchema | boolean; index: number }[]\n  ): void {\n    this._schemaSelections.set(path, newIndex);\n\n    // Get the new schema and generate default value\n    const newSchema = validSchemas[newIndex]?.schema;\n    if (newSchema && typeof newSchema !== \"boolean\") {\n      const newValue = this._getDefaultValue(newSchema);\n      this._handleValueChange(path, newValue);\n    }\n\n    this.requestUpdate();\n  }\n\n  /**\n   * Render conditional schema (if/then/else)\n   */\n  private _renderConditional(\n    schema: JSONSchema,\n    path: string,\n    value: unknown\n  ): unknown {\n    // Evaluate the 'if' condition\n    const ifSchema = schema.if;\n    let conditionMet = true;\n\n    if (ifSchema !== undefined && this._validator) {\n      if (typeof ifSchema === \"boolean\") {\n        conditionMet = ifSchema;\n      } else {\n        const errors = this._validator.validate(value, ifSchema);\n        conditionMet = errors.length === 0;\n      }\n    }\n\n    // Build the effective schema by merging if/then/else result with base schema\n    const baseSchema = { ...schema };\n    delete baseSchema.if;\n    delete baseSchema.then;\n    delete baseSchema.else;\n\n    // Determine which conditional schema to apply\n    const conditionalSchema = conditionMet ? schema.then : schema.else;\n\n    // If no conditional schema applies, just render base\n    if (conditionalSchema === undefined) {\n      return this._renderSchemaContent(baseSchema, path, value);\n    }\n\n    // Merge conditional schema with base schema\n    const effectiveSchema =\n      typeof conditionalSchema === \"boolean\"\n        ? baseSchema\n        : this._mergeSchemas(baseSchema, conditionalSchema);\n\n    return this._renderSchemaContent(effectiveSchema, path, value);\n  }\n\n  /**\n   * Merge two schemas together (simple shallow merge)\n   */\n  private _mergeSchemas(base: JSONSchema, overlay: JSONSchema): JSONSchema {\n    const merged: JSONSchema = { ...base };\n\n    // Merge properties\n    if (overlay.properties) {\n      merged.properties = { ...base.properties, ...overlay.properties };\n    }\n\n    // Merge required\n    if (overlay.required) {\n      merged.required = [\n        ...new Set([...(base.required || []), ...overlay.required]),\n      ];\n    }\n\n    // Copy over other overlay properties\n    for (const key of Object.keys(overlay)) {\n      if (key !== \"properties\" && key !== \"required\") {\n        (merged as Record<string, unknown>)[key] = overlay[key];\n      }\n    }\n\n    return merged;\n  }\n\n  /**\n   * Render schema content (called after resolving refs, composition, conditions)\n   */\n  private _renderSchemaContent(\n    schema: JSONSchema,\n    path: string,\n    value: unknown\n  ): unknown {\n    // Determine type and render appropriate field\n    const types = SchemaParser.getTypes(schema);\n    const primaryType = types[0] || this._inferType(schema, value);\n\n    // Get errors for this path\n    const fieldErrors = this._errors.filter((e) => e.instancePath === path);\n\n    // Get field label (title or derived from field name)\n    const fieldLabel = this._getFieldLabel(schema, path);\n\n    return html`\n      <div\n        class=\"jsf-field ${schema.deprecated\n          ? \"jsf-deprecated\"\n          : \"\"} ${schema.readOnly ? \"jsf-readonly\" : \"\"}\"\n        part=\"field\"\n      >\n        ${fieldLabel\n          ? html`\n              <label\n                class=\"jsf-label ${schema.required?.length\n                  ? \"jsf-label-required\"\n                  : \"\"}\"\n                part=\"label\"\n              >\n                ${fieldLabel}\n              </label>\n            `\n          : \"\"}\n        ${this._renderFieldByType(primaryType, schema, path, value)}\n        ${schema.description\n          ? html` <p class=\"jsf-description\">${schema.description}</p> `\n          : \"\"}\n        ${fieldErrors.map(\n          (error) => html`\n            <div class=\"jsf-error\" part=\"error\" role=\"alert\">\n              <svg\n                class=\"jsf-error-icon\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n              ${error.message}\n            </div>\n          `\n        )}\n      </div>\n    `;\n  }\n\n  /**\n   * Add an item to an array\n   */\n  private _addArrayItem(path: string, schema: JSONSchema): void {\n    const currentValue =\n      ((path\n        ? this._getNestedValue(this.value, path)\n        : this.value) as unknown[]) || [];\n\n    // Get the schema for the new item based on its index\n    const newIndex = currentValue.length;\n    const itemSchema = this._getArrayItemSchema(schema, newIndex);\n    const newItem =\n      itemSchema && typeof itemSchema !== \"boolean\"\n        ? this._getDefaultValue(itemSchema)\n        : undefined;\n\n    this._handleValueChange(path, [...currentValue, newItem]);\n  }\n\n  /**\n   * Remove an item from an array\n   */\n  private _removeArrayItem(path: string, index: number): void {\n    const currentValue =\n      ((path\n        ? this._getNestedValue(this.value, path)\n        : this.value) as unknown[]) || [];\n    const newValue = currentValue.filter((_, i) => i !== index);\n    this._handleValueChange(path, newValue);\n  }\n\n  /**\n   * Get a nested value from an object\n   */\n  private _getNestedValue(obj: unknown, path: string): unknown {\n    const parts = path.split(\"/\").filter((p) => p !== \"\");\n    let current = obj;\n\n    for (const part of parts) {\n      if (current === null || current === undefined) {\n        return undefined;\n      }\n      if (Array.isArray(current)) {\n        current = current[parseInt(part, 10)];\n      } else if (typeof current === \"object\") {\n        current = (current as Record<string, unknown>)[part];\n      } else {\n        return undefined;\n      }\n    }\n\n    return current;\n  }\n\n  /**\n   * Check if a field at a path is required\n   */\n  private _isRequired(path: string): boolean {\n    // This is a simplified check - full implementation would walk up the schema tree\n    const parts = path.split(\"/\").filter((p) => p !== \"\");\n    if (parts.length === 0) return false;\n\n    const fieldName = parts[parts.length - 1];\n\n    // Check if the parent schema has this field in required\n    if (this._parsedSchema?.required?.includes(fieldName)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Get the label for a field - uses title if available, otherwise derives from path\n   */\n  private _getFieldLabel(schema: JSONSchema, path: string): string | null {\n    // Use title if available\n    if (schema.title) {\n      return schema.title;\n    }\n\n    // Extract field name from path\n    const parts = path.split(\"/\").filter((p) => p !== \"\");\n    if (parts.length === 0) {\n      return null;\n    }\n\n    const fieldName = parts[parts.length - 1];\n\n    // Skip numeric indices (array items)\n    if (/^\\d+$/.test(fieldName)) {\n      return null;\n    }\n\n    // Convert field name to human-readable label\n    return this._fieldNameToLabel(fieldName);\n  }\n\n  /**\n   * Convert a field name to a human-readable label\n   * e.g., \"firstName\" -> \"First Name\", \"user_email\" -> \"User Email\"\n   */\n  private _fieldNameToLabel(fieldName: string): string {\n    return (\n      fieldName\n        // Insert space before uppercase letters (camelCase)\n        .replace(/([a-z])([A-Z])/g, \"$1 $2\")\n        // Replace underscores and hyphens with spaces\n        .replace(/[_-]/g, \" \")\n        // Capitalize first letter of each word\n        .replace(/\\b\\w/g, (char) => char.toUpperCase())\n        // Trim whitespace\n        .trim()\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"json-schema-form\": JsonSchemaForm;\n  }\n}\n"],"names":["t","e","s","o","n$3","r","n","i","S","c","h","a","l","p","d","u","f","b","y$1","_a","_b","y","v","_","m","g","$","x","E","A","C","P","V","N","I","L","z","H","M","R","k","Z","B","D","SchemaParser","schema","options","schemaString","parsed","name","def","definitions","ref","resolved","pointer","obj","parts","current","part","decoded","index","type","SchemaValidator","value","targetSchema","instancePath","schemaPath","errors","typeErrors","types","actualType","formatError","format","year","month","day","date","datePart","dateError","allowReference","url","ipv4Regex","match","octet","labels","label","segments","segment","braceDepth","inExpression","char","itemSchema","startIndex","keys","required","validatedProps","propName","propSchema","pattern","regex","requiredProps","reqProp","depSchema","subSchema","validCount","conditionMet","arr","j","item","aKeys","bKeys","key","formStyles","css","JsonSchemaForm","LitElement","changedProperties","firstSchema","firstVal","path","newValue","clone","next","cloned","lastPart","detail","html","primaryType","fieldErrors","fieldLabel","error","hasError","formatErrorMessage","examplePlaceholder","placeholder","htmlValue","inputValue","fullTime","isoValue","isInteger","val","num","selected","enumValue","option","currentValue","effectiveSchema","properties","definedProps","additionalProps","canAddProps","propertyNamesSchema","isNested","hasTitle","propPath","propValue","isNestedObject","schemaWithRequired","nestedContent","matchedPattern","input","currentCount","patternSchema","existingProps","trimmed","nameSchema","title","content","summary","isExpanded","sanitizedName","defaultValue","rest","prefixItems","hasPrefixItems","canAddMore","canRemoveItem","isPrefixItem","currentLength","prefixLength","parentSchema","schemas","keyword","validSchemas","selectedIndex","shouldInitializeValue","selectedOption","selectedSchema","optionLabels","opt","idx","newIndex","valueType","newSchema","ifSchema","baseSchema","conditionalSchema","base","overlay","merged","newItem","fieldName","__decorateClass","property","state","customElement"],"mappings":"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AA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAA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","x_google_ignoreList":[0,1,2,3,4,5,6]}